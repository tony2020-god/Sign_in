{"version":3,"sources":["assets\\5_lottery\\程式\\Host1_ComboBox.js"],"names":["gameModel","require","weel_js","jiugongge_js","cc","Class","Component","properties","FirstOption","type","Button","MainMode","Label","Rule","OptionsBox","Node","Winner_scroll","Prize_scroll","Mainobject","onLoad","game_type","Weel_js","find","getComponent","start","WebSocket_GameStatus_Host","ChooseColor","normalColor","NormalColor","disabledColor","HoverColor","pressedColor","lastChoose","BoxStatus","OptionBoxFuc","event","customEventData","schedule","ProgressBar","includes","wheelState","stopAllActions","rotation","ClearStatus","mode","active","aniSlow_In","TogetherAni","string","hoverColor","target","Sprite","fillRange","unschedule","ani_SlowIn","tween","by","angle","easing","KeepTurn","repeatForever","ani_wheelState1","then"],"mappings":"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","sourceRoot":"/","sourcesContent":["var gameModel = require(\"Model\");\r\nvar weel_js =  require(\"weel\");\r\nvar jiugongge_js =  require(\"Jiugongge\");\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        FirstOption:{\r\n            default:null,\r\n            type:cc.Button\r\n        },\r\n\r\n        MainMode:{\r\n            default:null,\r\n            type:cc.Label\r\n        },\r\n\r\n        Rule:{\r\n            default:null,\r\n            type:cc.Label\r\n        },\r\n\r\n        OptionsBox:{\r\n            default:null,\r\n            type:cc.Node\r\n        },\r\n\r\n        Winner_scroll:{\r\n            default:null,\r\n            type:cc.Node\r\n        },\r\n\r\n        Prize_scroll:{\r\n            default:null,\r\n            type:cc.Node\r\n        },\r\n\r\n        Mainobject:{\r\n            default:null,\r\n            type:cc.Node\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        if(gameModel.game_type == \"turntable\")  this.Weel_js = cc.find(\"畫布\").getComponent(weel_js)\r\n        else if (gameModel.game_type == \"jiugongge\") this.jiugongge_js = cc.find(\"畫布\").getComponent(jiugongge_js)\r\n    },\r\n\r\n    start () {\r\n        gameModel.WebSocket_GameStatus_Host(\"close\",0.1)\r\n        this.ChooseColor = this.FirstOption.normalColor   //淺藍色\r\n        this.NormalColor = this.FirstOption.disabledColor //灰色\r\n        this.HoverColor = this.FirstOption.pressedColor   //白色\r\n        this.lastChoose = this.FirstOption\r\n        this.BoxStatus = \"close\"\r\n    },\r\n\r\n    OptionBoxFuc(event, customEventData){\r\n        if(customEventData == \"controlBox\") this.schedule(this.ProgressBar, 0.01);\r\n        else\r\n        {\r\n           if(customEventData.includes(\"幸運輪盤\"))\r\n           {\r\n             this.Weel_js.wheelState = 0;\r\n             this.Mainobject.stopAllActions();  \r\n             this.Mainobject.rotation = 0;\r\n           }  \r\n           else this.jiugongge_js.ClearStatus();\r\n           gameModel.mode = customEventData.includes(\"順序參與\")? \"order\" : \"simultaneous\"\r\n           this.Winner_scroll.active = customEventData.includes(\"順序參與\")? false : true\r\n           this.Prize_scroll.active = customEventData.includes(\"順序參與\")? true : false\r\n\r\n           if(customEventData.includes(\"同時參與\")) \r\n           {\r\n             if(customEventData.includes(\"幸運輪盤\")) this.aniSlow_In();\r\n             else this.jiugongge_js.TogetherAni();\r\n             gameModel.WebSocket_GameStatus_Host(\"open\",0.1)\r\n           }\r\n           else gameModel.WebSocket_GameStatus_Host(\"close\",0.1)\r\n\r\n           this.MainMode.string = customEventData;\r\n           this.Rule.string = customEventData.includes(\"順序參與\")? \"參加者依序上台抽獎，並會在現場發放獎品\" : \"參加者掃QRC，會發放抽獎次數，將在各自的手機上抽獎\"\r\n           this.lastChoose.normalColor = this.NormalColor\r\n           this.lastChoose.hoverColor = this.HoverColor\r\n           event.target.getComponent(cc.Button).normalColor = event.target.getComponent(cc.Button).hoverColor = this.ChooseColor\r\n           this.lastChoose = event.target.getComponent(cc.Button)\r\n           this.schedule(this.ProgressBar, 0.01);\r\n        }\r\n    },\r\n\r\n    ProgressBar(){\r\n        if(this.BoxStatus == \"close\")\r\n        {\r\n            this.OptionsBox.active = true\r\n            this.OptionsBox.getComponent(cc.Sprite).fillRange -= 0.2;\r\n            if (this.OptionsBox.getComponent(cc.Sprite).fillRange <= -1) \r\n            {\r\n                this.unschedule(this.ProgressBar);\r\n                this.BoxStatus = \"open\"\r\n            }\r\n        }\r\n        else\r\n        {\r\n            this.OptionsBox.getComponent(cc.Sprite).fillRange += 0.2;\r\n            if (this.OptionsBox.getComponent(cc.Sprite).fillRange >= 0) \r\n            {\r\n                this.unschedule(this.ProgressBar);\r\n                this.OptionsBox.active = false\r\n                this.BoxStatus = \"close\"\r\n            }\r\n        }\r\n    },\r\n\r\n    aniSlow_In(){\r\n      //緩入動畫\r\n      var ani_SlowIn =  cc.tween(this.Mainobject)\r\n      .by(10, { angle: 360}, {easing: 'sineIn'})\r\n\r\n      //持續旋轉動畫\r\n      var KeepTurn = cc.tween(this.Mainobject)\r\n      .by(5, { angle: 360})\r\n      .repeatForever()\r\n\r\n      this.ani_wheelState1 = cc.tween(this.Mainobject)\r\n      .then(ani_SlowIn)\r\n      .then(KeepTurn)\r\n      .start()\r\n    },\r\n\r\n\r\n    // update (dt) {},\r\n});\r\n"]}