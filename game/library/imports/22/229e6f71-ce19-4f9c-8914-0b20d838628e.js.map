{"version":3,"sources":["assets\\共用模塊\\BeforeGameCountDown.js"],"names":["gameModel","require","cc","Class","Component","properties","countdownspritelist","type","SpriteFrame","countdownSound","AudioClip","countdownfinishSound","countdownsprite","Sprite","onLoad","director","getScene","_name","includes","NumberOfLotteryWS_Host","WebSocket","local_ID","activity_id","game_id","GameName","start","count","schedule","Guset_countdown","Host_countdown","spriteFrame","currentsound","audioEngine","play","WebSocket_GameStatus_Host","loadScene","BackGround_Theme"],"mappings":";;;;;;AAAA,IAAIA,SAAS,GAAGC,OAAO,CAAC,OAAD,CAAvB,EAAkC;AAElC;;;AACAC,EAAE,CAACC,KAAH,CAAS;AAAE;AACP,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AAERC,IAAAA,mBAAmB,EAAE;AACjB,iBAAS,EADQ;AAEjBC,MAAAA,IAAI,EAAE,CAACL,EAAE,CAACM,WAAJ;AAFW,KAFb;AAORC,IAAAA,cAAc,EAAE;AACZ,iBAAS,IADG;AAEZF,MAAAA,IAAI,EAAEL,EAAE,CAACQ;AAFG,KAPR;AAYRC,IAAAA,oBAAoB,EAAE;AAClB,iBAAS,IADS;AAElBJ,MAAAA,IAAI,EAAEL,EAAE,CAACQ;AAFS,KAZd;AAiBRE,IAAAA,eAAe,EAACV,EAAE,CAACW;AAjBX,GAHP;AAuBLC,EAAAA,MAvBK,oBAuBK;AACN,QAAGZ,EAAE,CAACa,QAAH,CAAYC,QAAZ,GAAuBC,KAAvB,CAA6BC,QAA7B,CAAsC,iBAAtC,CAAH,EAA6DlB,SAAS,CAACmB,sBAAV,GAAmC,IAAIC,SAAJ,CAAc,WAAWpB,SAAS,CAACqB,QAArB,GAAgC,wCAAhC,GAA0ErB,SAAS,CAACsB,WAApF,GAAiG,WAAjG,GAA+GtB,SAAS,CAACuB,OAAzH,GAAmI,QAAnI,GAA6IvB,SAAS,CAACwB,QAArK,CAAnC,CADvD,CAC0Q;AACnR,GAzBI;AA2BLC,EAAAA,KA3BK,mBA2BI;AACL,SAAKC,KAAL,GAAa,CAAb;AACA,SAAKC,QAAL,CAAc,YAAW;AAAE;AACvB,UAAGzB,EAAE,CAACa,QAAH,CAAYC,QAAZ,GAAuBC,KAAvB,CAA6BC,QAA7B,CAAsC,kBAAtC,CAAH,EAA8D,KAAKU,eAAL,GAA9D,KACK,IAAI1B,EAAE,CAACa,QAAH,CAAYC,QAAZ,GAAuBC,KAAvB,CAA6BC,QAA7B,CAAsC,iBAAtC,CAAJ,EAA8D,KAAKW,cAAL;AACtE,KAHD,EAGG,CAHH,EAGK,CAHL;AAIH,GAjCI;AAmCL;AACAA,EAAAA,cApCK,4BAoCW;AACZ,SAAKH,KAAL;AACA,SAAKd,eAAL,CAAqBkB,WAArB,GAAmC,KAAKxB,mBAAL,CAAyB,KAAKoB,KAAL,GAAW,CAApC,CAAnC;AACA,QAAI,KAAKA,KAAL,GAAa,CAAjB,EAAoB,KAAKK,YAAL,GAAoB7B,EAAE,CAAC8B,WAAH,CAAeC,IAAf,CAAoB,KAAKxB,cAAzB,EAAyC,KAAzC,EAAgD,GAAhD,CAApB,CAApB,KACK,IAAI,KAAKiB,KAAL,IAAc,CAAlB,EACL;AACI1B,MAAAA,SAAS,CAACkC,yBAAV,CAAoC,QAApC,EAA6C,GAA7C;AACA,WAAKH,YAAL,GAAoB7B,EAAE,CAAC8B,WAAH,CAAeC,IAAf,CAAoB,KAAKtB,oBAAzB,EAA+C,KAA/C,EAAsD,GAAtD,CAApB;AACH,KAJI,MAKA,IAAI,KAAKe,KAAL,IAAc,CAAlB,EAAqBxB,EAAE,CAACa,QAAH,CAAYoB,SAAZ,CAAsB,eAAenC,SAAS,CAACoC,gBAA/C;AAC7B,GA9CI;AAgDL;AACAR,EAAAA,eAjDK,6BAiDY;AACb,SAAKF,KAAL;AACA,SAAKd,eAAL,CAAqBkB,WAArB,GAAmC,KAAKxB,mBAAL,CAAyB,KAAKoB,KAAL,GAAW,CAApC,CAAnC;AACA,QAAI,KAAKA,KAAL,IAAc,CAAlB,EAAqBxB,EAAE,CAACa,QAAH,CAAYoB,SAAZ,CAAsB,gBAAenC,SAAS,CAACoC,gBAA/C;AACxB,GArDI,CAuDL;;AAvDK,CAAT","sourceRoot":"/","sourcesContent":["var gameModel = require(\"Model\"); //全域變數gameModel 不須加this就能提取\r\n\r\n///主持人遊戲開始倒數js\r\ncc.Class({ //進入Class區域 若想提取裡面的直需要用this\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n        countdownspritelist: {\r\n            default: [],\r\n            type: [cc.SpriteFrame]\r\n        },\r\n\r\n        countdownSound: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n\r\n        countdownfinishSound: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n        \r\n        countdownsprite:cc.Sprite,\r\n    },\r\n\r\n    onLoad () {\r\n        if(cc.director.getScene()._name.includes(\"Host2_CountDown\")) gameModel.NumberOfLotteryWS_Host = new WebSocket(\"wss://\" + gameModel.local_ID + \"/ws/v1/game/winning/staff?activity_id=\"+ gameModel.activity_id +'&game_id=' + gameModel.game_id + '&game='+ gameModel.GameName); //開啟更新得獎人的ws\r\n    },\r\n\r\n    start () {\r\n        this.count = 0;\r\n        this.schedule(function() { //每1秒鐘值行一次，重複做4+1次\r\n            if(cc.director.getScene()._name.includes(\"Guest3_CountDown\")) this.Guset_countdown();\r\n            else if (cc.director.getScene()._name.includes(\"Host2_CountDown\")) this.Host_countdown();\r\n        }, 1,4);\r\n    },\r\n\r\n    //主持人遊戲開始前倒數\r\n    Host_countdown(){\r\n        this.count++;\r\n        this.countdownsprite.spriteFrame = this.countdownspritelist[this.count-1];\r\n        if (this.count < 4) this.currentsound = cc.audioEngine.play(this.countdownSound, false, 0.5);\r\n        else if (this.count == 4) \r\n        {\r\n            gameModel.WebSocket_GameStatus_Host(\"gaming\",0.1)\r\n            this.currentsound = cc.audioEngine.play(this.countdownfinishSound, false, 0.5);\r\n        }\r\n        else if (this.count == 5) cc.director.loadScene(\"Host3_Game\" + gameModel.BackGround_Theme);\r\n    },\r\n\r\n    //玩家遊戲開始前倒數\r\n    Guset_countdown(){\r\n        this.count++;\r\n        this.countdownsprite.spriteFrame = this.countdownspritelist[this.count-1];\r\n        if (this.count == 5) cc.director.loadScene(\"Guest4_Game\"+ gameModel.BackGround_Theme);\r\n    }\r\n\r\n    // update (dt) {},\r\n});"]}