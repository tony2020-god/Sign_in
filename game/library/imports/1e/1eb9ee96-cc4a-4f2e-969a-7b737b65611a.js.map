{"version":3,"sources":["assets\\共用模塊\\備份\\HelloWorld.js"],"names":["GoEasy","require","window","Global","goEasy","cc","Class","Component","properties","editbox","EditBox","content","onLoad","initGoEasy","connectGoEasy","subscribe","start","self","getInstance","host","appkey","modules","connect","onSuccess","message","console","log","updateContent","onFailed","error","code","onProgress","attempts","time","getCurrentTime","messageContent","pubsub","channel","onMessage","publish","string","onChanged","event","customEventData","date","Date","hours","getHours","min","getMinutes","update","dt"],"mappings":"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","sourceRoot":"/","sourcesContent":["let GoEasy = require('./goeasy-2.0.12.min.js');\r\nwindow.Global = {\r\n\r\n\tgoEasy:null,\r\n},\r\ncc.Class({\r\n\textends: cc.Component,\r\n\tproperties: {\r\n\t\teditbox: cc.EditBox,\r\n\t\tgoEasy: null,\r\n\t\tcontent: \"\",\r\n\t},\r\n\tonLoad: function () {\r\n\t\t// 初始化GoEasy并完成订阅channel\r\n\t\tthis.initGoEasy();\r\n\t\tthis.connectGoEasy();\r\n\t\tthis.subscribe();\r\n\r\n\t},\r\n\tstart: function () {\r\n\r\n\t},\r\n\r\n\r\n\tinitGoEasy: function () {\r\n\t\t// 初始化GoEasy\r\n\t\tvar self = this;\r\n\t\tGlobal.goEasy = GoEasy.getInstance({\r\n\t\t\thost: 'singapore.goeasy.io', //应用所在的区域地址: 【hangzhou.goeasy.io |singapore.goeasy.io】\r\n\t\t\tappkey: \"BC-64f4ade695d54cdcbcd9c4413fd94e1f\", //替换为您的common appkey\r\n\t\t\tmodules: [\"pubsub\"] //PUBSUB:对应常规的websocket功能,IM:对应IM聊天功能\r\n\t\t})\r\n\t\t\r\n\t},\r\n\r\n\r\n\tconnectGoEasy: function () {\r\n\t\tvar self = this;\r\n\t\tGlobal.goEasy.connect({\r\n\t\t\tonSuccess: function () {\r\n\t\t\t\t//连接成功\r\n\t\t\t\tvar message = {\r\n\t\t\t\t\tcontent: \"连接成功\"\r\n\t\t\t\t\t\r\n\t\t\t\t};\r\n\t\t\t\tconsole.log(\"连接成功\");\r\n\t\t\t\tself.updateContent(message);\r\n\t\t\t},\r\n\t\t\tonFailed: function (error) {\r\n\t\t\t\t//连接失败\r\n\t\t\t\tvar message = {\r\n\t\t\t\t\tcontent: \"Failed to connect GoEasy, code:\" + error.code + \",error:\" + error.content\r\n\t\t\t\t};\r\n\t\t\t\t// console.log(\"连接失敗\");\r\n\r\n\t\t\t\tself.updateContent(message);\r\n\t\t\t},\r\n\t\t\tonProgress: function (attempts) {\r\n\t\t\t\t//连接或自动重连中\r\n\t\t\t\tvar message = {\r\n\t\t\t\t\tcontent: \"连接中\" + attempts\r\n\t\t\t\t};\r\n\t\t\t\tconsole.log(\"连接中\");\r\n\r\n\t\t\t\tself.updateContent(message);\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\r\n\tupdateContent(message) {\r\n\t\t// 更新内容到页面\r\n\t\tvar time = this.getCurrentTime();\r\n\t\tvar messageContent = time + \" \" + message.content;\r\n\t\tconsole.log(messageContent);\r\n\t\t// 动态设置item\r\n\t\t// var scrollViewNode = this.node.getChildByName(\"scrollContent\");\r\n\t\t// var contentNode = scrollViewNode.getComponent(cc.ScrollView);\r\n\t\t// var newNode = new cc.Node();\r\n\t\t// newNode.name = \"item\";\r\n\t\t// // 添加Label节点\r\n\t\t// let labelNode = newNode.addComponent(cc.Label);\r\n\t\t// // 设置颜色\r\n\t\t// labelNode.node.color = new cc.color(51, 51, 51);\r\n\t\t// labelNode.node.width = 210;\r\n\t\t// labelNode.name = \"label\";\r\n\t\t// labelNode.string = messageContent;\r\n\t\t// labelNode.fontSize = 16;\r\n\t\t// labelNode.lineHeight = 16;\r\n\t\t// // 宽度不够自动换行显示\r\n\t\t// labelNode.overflow = cc.Label.Overflow.RESIZE_HEIGHT;\r\n\t\t// let item = cc.instantiate(newNode);\r\n\t\t// item.parent = contentNode.content;\r\n\t},\r\n\tsubscribe: function () {\r\n\t\t// 订阅channel\r\n\t\tvar self = this;\r\n\t\tGlobal.goEasy.pubsub.subscribe({\r\n\t\t\tchannel: \"my_channel\", //替换为您自己的channel\r\n\t\t\tonMessage: function (message) {\r\n\t\t\t\tself.updateContent(message);\r\n\t\t\t\tcc.log(\"收到消息\")\r\n\t\t\t},\r\n\t\t\tonSuccess: function () {\r\n\t\t\t\tvar message = {\r\n\t\t\t\t\tcontent: \"Channel订阅成功。\"\r\n\t\t\t\t};\r\n\t\t\t\tself.updateContent(message);\r\n\t\t\t},\r\n\t\t\tonFailed: function (error) {\r\n\t\t\t\tvar message = {\r\n\t\t\t\t\tcontent: \"errorCode:\" + error.code + \",错误信息:\" + error.content\r\n\t\t\t\t};\r\n\t\t\t\tself.updateContent(message);\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tpublish: function () {\r\n\t\tif (this.content != \"\") {\r\n\t\t\t// 发送消息到channel中\r\n\t\t\tGlobal.goEasy.pubsub.publish({\r\n\t\t\t\tchannel: \"my_channel\", //替换为您自己的channel\r\n\t\t\t\tmessage: this.content, //替换为您想要发送的消息内容\r\n\t\t\t\tonSuccess: function () {\r\n\t\t\t\t\tconsole.log(\"消息发布成功。\");\r\n\t\t\t\t},\r\n\t\t\t\tonFailed: function (error) {\r\n\t\t\t\t\tconsole.log(\"消息发送失败，错误编码：\" + error.code + \" 错误信息：\" + error.content);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.editbox.string = \"\";\r\n\t},\r\n\tonChanged: function (event, editbox, customEventData) {\r\n\t\t// 监听输入框变化\r\n\t\tthis.content = event;\r\n\t\tthis.editbox = editbox;\r\n\t},\r\n\tgetCurrentTime() {\r\n\t\tvar date = new Date();\r\n\t\tvar hours = date.getHours();\r\n\t\tvar min = date.getMinutes();\r\n\t\tvar time = hours + \":\" + min;\r\n\t\treturn time;\r\n\t},\r\n\tupdate: function (dt) {\r\n\t\t// called every frame\r\n\t},\r\n});\r\n"]}