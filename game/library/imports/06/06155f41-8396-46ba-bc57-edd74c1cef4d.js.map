{"version":3,"sources":["assets\\共用模塊\\Host3_ShowNewWinner.js"],"names":["gameModel","require","WinnerItem","cc","Class","Component","properties","items","type","Prefab","items2","prize_total","Label","onLoad","itemlist","winlist","index","indexcount","alreadyend","director","getPhysicsManager","enabled","WinnerData","SpawnNewestWinner","start","items_parent","find","WebSocket_NumberOfLottery_Host","string","SpawnNewWinner","winner_name","length","push","node","instantiate","parent","setSiblingIndex","obj","getComponent","updateInfo","CloseGame","WebSocket_GameStatus_Host","GameStatusMessage","update","dt","NumberOfLotteryWS_Host","close","loadScene","BackGround_Theme"],"mappings":"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","sourceRoot":"/","sourcesContent":["var gameModel = require(\"Model\");\r\nvar WinnerItem = require('Host3_WinRecordItem')\r\n\r\n///主持人及時顯示中獎玩家js\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        items: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        items2: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        prize_total: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n    },\r\n\r\n    onLoad () {\r\n        this.itemlist= [];\r\n        this.winlist= [];\r\n        this.index = [];\r\n        this.indexcount = 0;\r\n        this.alreadyend = false\r\n        cc.director.getPhysicsManager().enabled = true;\r\n        gameModel.WinnerData = this;\r\n        gameModel.SpawnNewestWinner = false;    \r\n    },\r\n    \r\n    start () {\r\n        this.items_parent = cc.find(\"畫布/中獎列表/view/內容\");\r\n        gameModel.WebSocket_NumberOfLottery_Host();\r\n        this.prize_total.string = gameModel.prize_total;\r\n    },\r\n\r\n    //列出得人獎物件\r\n    SpawnNewWinner(){\r\n           if(gameModel.winner_name.length % 2 == 0)\r\n           {\r\n               this.indexcount++;\r\n               this.index.push(this.indexcount);\r\n               var node = cc.instantiate(this.items);\r\n               node.parent = this.items_parent;\r\n               node.setSiblingIndex(0); //讓子物件顯示在最上層\r\n               var obj = node.getComponent(WinnerItem);//抓取WinnerItem\r\n               this.itemlist.push(obj);\r\n               this.itemlist[this.indexcount - 1].updateInfo(this.indexcount - 1);\r\n           }\r\n           else\r\n           {\r\n               this.indexcount++;\r\n               this.index.push(this.indexcount);\r\n               var node = cc.instantiate(this.items2);\r\n               node.parent = this.items_parent;\r\n               node.setSiblingIndex(0); //讓子物件顯示在最上層\r\n               var obj = node.getComponent(WinnerItem);//抓取WinnerItem\r\n               this.itemlist.push(obj);\r\n               this.itemlist[this.indexcount - 1].updateInfo(this.indexcount - 1);\r\n           }    \r\n           this.prize_total.string = gameModel.prize_total;\r\n    },\r\n\r\n    //按下關閉遊戲鍵\r\n    CloseGame(){\r\n        gameModel.WebSocket_GameStatus_Host(\"end\",0.1)\r\n        gameModel.GameStatusMessage = \"end\"\r\n    },\r\n\r\n    update (dt) {\r\n       if(gameModel.GameStatusMessage == \"end\" && this.alreadyend == false)\r\n       {\r\n          this.alreadyend = true;\r\n          gameModel.NumberOfLotteryWS_Host.close();\r\n          cc.director.loadScene(\"Host4_Last\"+ gameModel.BackGround_Theme);\r\n       }\r\n    },\r\n});\r\n\r\n\r\n\r\n\r\n\r\n \r\n   "]}