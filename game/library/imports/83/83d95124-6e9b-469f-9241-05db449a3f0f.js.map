{"version":3,"sources":["assets\\3_whack_a_mole\\遊戲模塊\\Guest4_Whack_a_mole.js"],"names":["gameModel","require","cc","Class","Component","properties","mouseHoles","type","Node","mouseTypeImg","SpriteFrame","mouseIndexArr","onLoad","Hammer","find","WebSocket_UpDateScore_Guest","Score","start","node","on","event","setPosition","currentTouch","_startPoint","x","y","active","scheduleOnce","schedule","MouseComeOut","updateMouseNodeInfo","mouse","tag","getComponent","isLive","i","randomNodeIndex","Math","floor","random","childrenCount","randomSpriteFrameIndex","length","indexOf","children","getChildByName","push","Sprite","spriteFrame","GetData","MouseAnimation"],"mappings":"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","sourceRoot":"/","sourcesContent":["var gameModel = require(\"Model\");\r\n\r\n///玩家在遊戲中敲敲樂計算分數js\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        mouseHoles: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        mouseTypeImg: {\r\n            default: [],\r\n            type: [cc.SpriteFrame]\r\n        },\r\n        mouseIndexArr :null\r\n    },\r\n\r\n    onLoad () {\r\n        this.Hammer = cc.find(\"槌子\")\r\n        gameModel.WebSocket_UpDateScore_Guest();\r\n        gameModel.Score = 0\r\n    },\r\n\r\n    start () {\r\n      this.mouseIndexArr = []\r\n\r\n      //槌子動畫\r\n      this.node.on(\"touchstart\", function (event) {  \r\n        this.Hammer.setPosition(event.currentTouch._startPoint.x + 100, event.currentTouch._startPoint.y - 90)\r\n        this.Hammer.active = true\r\n        this.scheduleOnce(function() { this.Hammer.active = false}, 0.15);\r\n      }, this);\r\n\r\n      this.schedule(function() { \r\n        this.MouseComeOut()\r\n      }, 0.5);\r\n    },\r\n\r\n    updateMouseNodeInfo(mouse, tag) {\r\n        //設置當前老鼠節點爲存活\r\n        mouse.getComponent(\"Guest_MouseManager\").isLive = true;\r\n        //將老鼠類型序號作爲標籤添加到老鼠節點上\r\n        mouse.getComponent(\"Guest_MouseManager\").tag = tag;\r\n    },\r\n    \r\n    MouseComeOut() {\r\n        for (let i = 0; i < 3; i++) \r\n        {\r\n            let randomNodeIndex = Math.floor(Math.random() * (this.mouseHoles.childrenCount));  //隨機鼠洞\r\n            let randomSpriteFrameIndex = Math.floor(Math.random() * (this.mouseTypeImg.length)) //隨機老鼠圖片\r\n            \r\n            if (this.mouseIndexArr.indexOf(randomNodeIndex) === -1) \r\n            {\r\n                var mouse = this.mouseHoles.children[randomNodeIndex].getChildByName(\"遮罩\").getChildByName(\"鼠\"); //mouse = 隨機洞的老鼠\r\n                this.updateMouseNodeInfo(mouse, randomSpriteFrameIndex); //執行老鼠節點數據刷新函數\r\n                this.mouseIndexArr.push(randomNodeIndex);\r\n                mouse.getComponent(cc.Sprite).spriteFrame = this.mouseTypeImg[randomSpriteFrameIndex];\r\n                mouse.getComponent(\"Guest_MouseManager\").GetData(randomNodeIndex,randomSpriteFrameIndex);\r\n                mouse.getComponent(\"Guest_MouseManager\").MouseAnimation();\r\n            }\r\n        }\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}