{"version":3,"sources":["assets\\TEST\\NewScript.js"],"names":["gameModel","require","cc","Class","Component","properties","Ingame","type","Node","Fake","SpriteFrame","Real","Score","Label","items","Prefab","onLoad","pos","position","TopTitle","director","getCollisionManager","enabled","randomNodeIndex","items_parent","find","score","start","node","on","move","end","console","log","event","Vec2","getLocationX","getLocationY","convertToNodeSpaceAR","string","ADDanii","reset","Mani","Math","floor","random","instantiate","getComponent","Sprite","spriteFrame","parent","tween","to","v2","scale","call","destroy"],"mappings":";;;;;;AAAA,IAAIA,SAAS,GAAGC,OAAO,CAAC,OAAD,CAAvB;;AAEAC,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,MAAM,EAAE;AACJ,iBAAS,IADL;AAEJC,MAAAA,IAAI,EAAEL,EAAE,CAACM;AAFL,KADA;AAMRC,IAAAA,IAAI,EAAC;AACD,iBAAS,IADR;AAEDF,MAAAA,IAAI,EAAEL,EAAE,CAACQ;AAFR,KANG;AAWRC,IAAAA,IAAI,EAAC;AACD,iBAAS,IADR;AAEDJ,MAAAA,IAAI,EAAEL,EAAE,CAACQ;AAFR,KAXG;AAgBRE,IAAAA,KAAK,EAAC;AACF,iBAAS,IADP;AAEFL,MAAAA,IAAI,EAAEL,EAAE,CAACW;AAFP,KAhBE;AAqBRC,IAAAA,KAAK,EAAE;AACH,iBAAS,IADN;AAEHP,MAAAA,IAAI,EAAEL,EAAE,CAACa;AAFN;AArBC,GAHP;AA8BL;AAEAC,EAAAA,MAhCK,oBAgCK;AACN,SAAKC,GAAL,GAAW,KAAKX,MAAL,CAAYY,QAAvB;AACAlB,IAAAA,SAAS,CAACmB,QAAV,GAAqB,GAArB;AACAjB,IAAAA,EAAE,CAACkB,QAAH,CAAYC,mBAAZ,GAAkCC,OAAlC,GAA4C,IAA5C;AACA,SAAKC,eAAL,GAAuB,CAAvB;AACA,SAAKC,YAAL,GAAoBtB,EAAE,CAACuB,IAAH,CAAQ,IAAR,CAApB;AACAzB,IAAAA,SAAS,CAAC0B,KAAV,GAAkB,CAAlB;AACH,GAvCI;AAyCLC,EAAAA,KAzCK,mBAyCI;AACL,SAAKC,IAAL,CAAUC,EAAV,CAAa,WAAb,EAA0B,KAAKC,IAA/B,EAAqC,IAArC;AACA,SAAKF,IAAL,CAAUC,EAAV,CAAa,UAAb,EAAyB,KAAKE,GAA9B,EAAmC,IAAnC;AACA,SAAKH,IAAL,CAAUC,EAAV,CAAa,aAAb,EAA2B,KAAKE,GAAhC,EAAqC,IAArC;AACA,SAAKd,GAAL,GAAW,KAAKX,MAAL,CAAYY,QAAvB;AACAc,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKhB,GAAjB;AACH,GA/CI;AAiDLa,EAAAA,IAjDK,gBAiDAI,KAjDA,EAiDM;AACR,QAAIjB,GAAG,GAAG,IAAIf,EAAE,CAACiC,IAAP,CAAYD,KAAK,CAACE,YAAN,EAAZ,EAAiCF,KAAK,CAACG,YAAN,EAAjC,CAAV;AACApB,IAAAA,GAAG,GAAG,KAAKW,IAAL,CAAUU,oBAAV,CAA+BrB,GAA/B,CAAN;AACA,SAAKX,MAAL,CAAYY,QAAZ,GAAuBD,GAAvB;AACF,GArDI;AAuDLc,EAAAA,GAvDK,iBAuDA;AACA,QAAG/B,SAAS,CAACmB,QAAV,IAAsB,IAAzB,EACA;AACGnB,MAAAA,SAAS,CAAC0B,KAAV,GAAkB,KAAKH,eAAL,GAAuB,CAAvB,GAA2BvB,SAAS,CAAC0B,KAAV,GAAkB,CAA7C,GAAiD1B,SAAS,CAAC0B,KAAV,GAAkB,CAArF;AACA,UAAG1B,SAAS,CAAC0B,KAAV,GAAkB,CAArB,EAAwB1B,SAAS,CAAC0B,KAAV,GAAkB,CAAlB;AACxB,WAAKd,KAAL,CAAW2B,MAAX,GAAoB,SAASvC,SAAS,CAAC0B,KAAvC;AACA,WAAKc,OAAL,CAAa,KAAKlC,MAAlB;AACA,WAAKmC,KAAL;AACAT,MAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AACF,KARD,MASK,IAAGjC,SAAS,CAACmB,QAAV,IAAsB,IAAzB,EACL;AACG,WAAKuB,IAAL,CAAU,KAAKpC,MAAf;AACA,WAAKmC,KAAL;AACAT,MAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AACF,KALI,MAMA,IAAGjC,SAAS,CAACmB,QAAV,IAAsB,GAAzB,EAA8B,KAAKb,MAAL,CAAYY,QAAZ,GAAuB,KAAKD,GAA5B;AACvC,GAxEI;AA0ELwB,EAAAA,KA1EK,mBA0EE;AACHzC,IAAAA,SAAS,CAACmB,QAAV,GAAqB,GAArB;AACA,SAAKI,eAAL,GAAuBoB,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,CAA3B,CAAvB;AACAb,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKV,eAAjB;AACA,QAAIK,IAAI,GAAG1B,EAAE,CAAC4C,WAAH,CAAe,KAAKhC,KAApB,CAAX;AACAc,IAAAA,IAAI,CAACmB,YAAL,CAAkB7C,EAAE,CAAC8C,MAArB,EAA6BC,WAA7B,GAA2C,KAAK1B,eAAL,IAAwB,CAAxB,GAA4B,KAAKd,IAAjC,GAAwC,KAAKE,IAAxF;AACAiB,IAAAA,IAAI,CAACsB,MAAL,GAAc,KAAK1B,YAAnB;AACA,SAAKlB,MAAL,GAAcsB,IAAd;AACA,SAAKtB,MAAL,CAAYY,QAAZ,GAAuB,KAAKD,GAA5B;AACH,GAnFI;AAqFLuB,EAAAA,OArFK,mBAqFGZ,IArFH,EAqFQ;AACT1B,IAAAA,EAAE,CAACiD,KAAH,CAASvB,IAAT,EACCwB,EADD,CACI,GADJ,EACQ;AAAElC,MAAAA,QAAQ,EAAEhB,EAAE,CAACmD,EAAH,CAAM,CAAN,EAAS,OAAT,CAAZ;AAA8BC,MAAAA,KAAK,EAAE;AAArC,KADR,EAECC,IAFD,CAEM,YAAM;AAAC3B,MAAAA,IAAI,CAAC4B,OAAL;AAAgB,KAF7B,EAGC7B,KAHD;AAIH,GA1FI;AA4FLe,EAAAA,IA5FK,gBA4FAd,IA5FA,EA4FK;AACN1B,IAAAA,EAAE,CAACiD,KAAH,CAASvB,IAAT,EACCwB,EADD,CACI,GADJ,EACQ;AAAElC,MAAAA,QAAQ,EAAEhB,EAAE,CAACmD,EAAH,CAAM,CAAN,EAAS,CAAC,QAAV;AAAZ,KADR,EAECE,IAFD,CAEM,YAAM;AAAC3B,MAAAA,IAAI,CAAC4B,OAAL;AAAgB,KAF7B,EAGC7B,KAHD;AAIH,GAjGI,CAkGL;;AAlGK,CAAT","sourceRoot":"/","sourcesContent":["var gameModel = require(\"Model\");\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        Ingame: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\r\n        Fake:{\r\n            default: null,\r\n            type: cc.SpriteFrame\r\n        },\r\n\r\n        Real:{\r\n            default: null,\r\n            type: cc.SpriteFrame\r\n        },\r\n\r\n        Score:{\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n\r\n        items: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.pos = this.Ingame.position\r\n        gameModel.TopTitle = \"無\"\r\n        cc.director.getCollisionManager().enabled = true;\r\n        this.randomNodeIndex = 1\r\n        this.items_parent = cc.find(\"畫布\")\r\n        gameModel.score = 0\r\n    },\r\n\r\n    start () {\r\n        this.node.on('touchmove', this.move, this);\r\n        this.node.on('touchend', this.end, this);\r\n        this.node.on('touchcancel',this.end, this)\r\n        this.pos = this.Ingame.position\r\n        console.log(this.pos)\r\n    },\r\n\r\n    move(event){\r\n       var pos = new cc.Vec2(event.getLocationX(),event.getLocationY()) \r\n       pos = this.node.convertToNodeSpaceAR(pos)\r\n       this.Ingame.position = pos\r\n    },\r\n\r\n    end(){\r\n         if(gameModel.TopTitle == \"加分\") \r\n         {\r\n            gameModel.score = this.randomNodeIndex > 0 ? gameModel.score + 1 : gameModel.score - 3\r\n            if(gameModel.score < 0) gameModel.score = 0\r\n            this.Score.string = \"分數: \" + gameModel.score\r\n            this.ADDanii(this.Ingame)\r\n            this.reset();\r\n            console.log(\"加分\")\r\n         }\r\n         else if(gameModel.TopTitle == \"扣分\") \r\n         {\r\n            this.Mani(this.Ingame);\r\n            this.reset();\r\n            console.log(\"扣分\")\r\n         }\r\n         else if(gameModel.TopTitle == \"無\") this.Ingame.position = this.pos\r\n    },\r\n\r\n    reset(){\r\n        gameModel.TopTitle = \"無\"\r\n        this.randomNodeIndex = Math.floor(Math.random() * 5)\r\n        console.log(this.randomNodeIndex)\r\n        var node = cc.instantiate(this.items);\r\n        node.getComponent(cc.Sprite).spriteFrame = this.randomNodeIndex == 0 ? this.Fake : this.Real\r\n        node.parent = this.items_parent;\r\n        this.Ingame = node\r\n        this.Ingame.position = this.pos\r\n    },\r\n\r\n    ADDanii(node){\r\n        cc.tween(node)\r\n        .to(0.5,{ position: cc.v2(0, 667.876),scale: 0})\r\n        .call(() => {node.destroy();})\r\n        .start()\r\n    },\r\n\r\n    Mani(node){\r\n        cc.tween(node)\r\n        .to(0.1,{ position: cc.v2(0, -1771.968)})\r\n        .call(() => {node.destroy();})\r\n        .start()\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}