{"version":3,"sources":["assets\\共用模塊\\Host3_GameTimeCountDown.js"],"names":["gameModel","require","cc","Class","Component","properties","countdownText","type","Label","tensecond","AudioClip","onLoad","XMLTimeLimit","string","gametimeCountDown","schedule","countdown","gametimelimit","GameName","NoLimitTime","find","active","start","GameStatusMessage","currentsound","audioEngine","play","stop","update","dt"],"mappings":";;;;;;AAAA,IAAIA,SAAS,GAAGC,OAAO,CAAC,OAAD,CAAvB,EAEA;;;AACAC,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,aAAa,EAAE;AACX,iBAAQ,IADG;AAEXC,MAAAA,IAAI,EAACL,EAAE,CAACM;AAFG,KADP;AAKRC,IAAAA,SAAS,EAAE;AACP,iBAAS,IADF;AAEPF,MAAAA,IAAI,EAAEL,EAAE,CAACQ;AAFF;AALH,GAHP;AAcLC,EAAAA,MAdK,oBAcK;AACN,QAAGX,SAAS,CAACY,YAAV,IAA0B,IAA7B,EACA;AACI,WAAKN,aAAL,CAAmBO,MAAnB,GAA4Bb,SAAS,CAACc,iBAAtC;AACA,WAAKC,QAAL,CAAc,YAAW;AAAI;AAC1B,aAAKC,SAAL;AACF,OAFD,EAEG,CAFH,EAEKhB,SAAS,CAACiB,aAAV,GAA0B,CAF/B;AAGH,KAND,MAOK,IAAGjB,SAAS,CAACY,YAAV,IAA0B,KAA1B,IAAmCZ,SAAS,CAACkB,QAAV,IAAsB,SAA5D,EACL;AACI,WAAKC,WAAL,GAAmBjB,EAAE,CAACkB,IAAH,CAAQ,gBAAR,CAAnB;AACA,WAAKD,WAAL,CAAiBE,MAAjB,GAA0B,IAA1B;AACH;AACJ,GA3BI;AA6BLC,EAAAA,KA7BK,mBA6BI,CAAE,CA7BN;AA+BL;AACAN,EAAAA,SAhCK,uBAgCM;AACP,QAAGhB,SAAS,CAACuB,iBAAV,IAA+B,KAA/B,IAAwCvB,SAAS,CAACc,iBAAV,IAA+B,CAA1E,EAA6E;AAC7Ed,IAAAA,SAAS,CAACc,iBAAV;AACA,SAAKR,aAAL,CAAmBO,MAAnB,GAA4Bb,SAAS,CAACc,iBAAtC;AACA,QAAGd,SAAS,CAACc,iBAAV,IAA+B,EAAlC,EAAsC,KAAKU,YAAL,GAAoBtB,EAAE,CAACuB,WAAH,CAAeC,IAAf,CAAoB,KAAKjB,SAAzB,EAAoC,IAApC,EAA0C,EAA1C,CAApB;;AACtC,QAAGT,SAAS,CAACc,iBAAV,IAA+B,CAAlC,EACA;AACIZ,MAAAA,EAAE,CAACuB,WAAH,CAAeE,IAAf,CAAoB,KAAKH,YAAzB,EADJ,CAEI;;AACAxB,MAAAA,SAAS,CAACuB,iBAAV,GAA8B,KAA9B;AACH;AACJ,GA3CI;AA6CJK,EAAAA,MA7CI,kBA6CIC,EA7CJ,EA6CQ,CAAE;AA7CV,CAAT","sourceRoot":"/","sourcesContent":["var gameModel = require(\"Model\"); \r\n\r\n///主持人遊戲時間倒數js\r\ncc.Class({ \r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        countdownText: {\r\n            default:null,\r\n            type:cc.Label\r\n        },\r\n        tensecond: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n    },\r\n\r\n    onLoad () {\r\n        if(gameModel.XMLTimeLimit == true)\r\n        {\r\n            this.countdownText.string = gameModel.gametimeCountDown;\r\n            this.schedule(function() {   //每1秒鐘值行一次，重複做gameModel.gametimelimit + 1次\r\n               this.countdown();\r\n            }, 1,gameModel.gametimelimit + 1);\r\n        }\r\n        else if(gameModel.XMLTimeLimit == false && gameModel.GameName == \"redpack\")\r\n        {\r\n            this.NoLimitTime = cc.find(\"畫布/場景/倒數燈籠/無限時\") \r\n            this.NoLimitTime.active = true;\r\n        }\r\n    },\r\n\r\n    start () {},\r\n    \r\n    //遊戲倒數\r\n    countdown(){\r\n        if(gameModel.GameStatusMessage == \"end\" || gameModel.gametimeCountDown == 0) return;\r\n        gameModel.gametimeCountDown--;\r\n        this.countdownText.string = gameModel.gametimeCountDown;\r\n        if(gameModel.gametimeCountDown == 10) this.currentsound = cc.audioEngine.play(this.tensecond, true, 15);\r\n        if(gameModel.gametimeCountDown == 0)\r\n        {\r\n            cc.audioEngine.stop(this.currentsound)\r\n            //gameModel.WebSocket_GameStatus_Host(\"end\",0.1)\r\n            gameModel.GameStatusMessage = \"end\"\r\n        }\r\n    },\r\n\r\n     update (dt) {},\r\n});"]}