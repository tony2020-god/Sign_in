{"version":3,"sources":["assets\\共用模塊\\Host3_ShowNewWinner_Score.js"],"names":["gameModel","require","WinnerItem","Host3_ShowNewWinner_Original","cc","Class","properties","round","type","Label","WaitingRank","Node","onLoad","alreadyend","itemlist","winlist","index","indexcount","WinnerData","SpawnNewestWinner","start","items_parent","find","WebSocket_NumberOfLottery_Score_Host","string","CurrentRound","SpawnNewWinner","winner_name","length","push","node","instantiate","items","parent","obj","getComponent","updateInfo","items2","ClearRank","removeAllChildren","NextSence","WebSocket_GameStatus_Host","GameStatusMessage","scheduleOnce","director","loadScene","BackGround_Theme","CloseGame","update","dt","active"],"mappings":"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","sourceRoot":"/","sourcesContent":["var gameModel = require(\"Model\");\r\nvar WinnerItem = require('Host3_WinRecordItem_Score')\r\nvar Host3_ShowNewWinner_Original = require(\"Host3_ShowNewWinner\")\r\n\r\n///主持人及時顯示玩家分數js\r\ncc.Class({\r\n    extends: Host3_ShowNewWinner_Original,\r\n\r\n    properties: {\r\n        round: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n\r\n        WaitingRank: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n    },\r\n\r\n    onLoad () {\r\n        this.alreadyend = false\r\n        this.itemlist=[];\r\n        this.winlist=[];\r\n        this.index = [];\r\n        this.indexcount = 0;\r\n        gameModel.WinnerData = this;\r\n        gameModel.SpawnNewestWinner = false;\r\n    },\r\n    \r\n    start () {\r\n        this.items_parent = cc.find(\"畫布/中獎列表/view/內容\");\r\n        gameModel.WebSocket_NumberOfLottery_Score_Host()\r\n        this.round.string = gameModel.CurrentRound;\r\n    },\r\n\r\n    //列出得人獎物件\r\n    SpawnNewWinner(){\r\n           if(gameModel.winner_name.length % 2 == 0)\r\n           {\r\n               this.indexcount++;\r\n               this.index.push(this.indexcount);\r\n               var node = cc.instantiate(this.items);\r\n               node.parent = this.items_parent;\r\n               var obj = node.getComponent(WinnerItem);//抓取WinnerItem\r\n               this.itemlist.push(obj);\r\n               this.itemlist[this.indexcount - 1].updateInfo(this.indexcount - 1);\r\n           }\r\n           else\r\n           {\r\n               this.indexcount++;\r\n               this.index.push(this.indexcount);\r\n               var node = cc.instantiate(this.items2);\r\n               node.parent = this.items_parent;\r\n               var obj = node.getComponent(WinnerItem);//抓取WinnerItem\r\n               this.itemlist.push(obj);\r\n               this.itemlist[this.indexcount - 1].updateInfo(this.indexcount - 1);\r\n           }    \r\n    },\r\n\r\n    ClearRank(){\r\n        this.indexcount = 0\r\n        this.index.length = 0\r\n        this.itemlist.length = 0\r\n        this.items_parent.removeAllChildren();\r\n    },\r\n    \r\n    NextSence(){\r\n        gameModel.WebSocket_GameStatus_Host(\"end\",0.1)\r\n        gameModel.GameStatusMessage = \"end\"\r\n        this.scheduleOnce(function() {   \r\n            cc.director.loadScene(\"Host4_Last\"+ gameModel.BackGround_Theme);\r\n        }, 2); \r\n    },\r\n\r\n    CloseGame(){\r\n        gameModel.WebSocket_GameStatus_Host(\"calculate\",0.1)\r\n        gameModel.GameStatusMessage = \"calculate\"\r\n    },\r\n    \r\n    update (dt) {\r\n        if(gameModel.GameStatusMessage == \"calculate\" &&  this.alreadyend == false)\r\n        {\r\n           this.alreadyend = true\r\n           this.WaitingRank.active = true;\r\n        }\r\n    },\r\n});\r\n\r\n\r\n\r\n\r\n\r\n \r\n   "]}