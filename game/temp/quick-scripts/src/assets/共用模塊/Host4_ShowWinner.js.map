{"version":3,"sources":["assets\\共用模塊\\Host4_ShowWinner.js"],"names":["WinnerItem","require","gameModel","cc","Class","Component","properties","items","type","Prefab","round","Label","WrongAlert","Node","onLoad","itemlist","winlist","index","indexcount","items_parent","find","AlertText","start","SpawnWinner","string","CurrentRound","NextRound","prize_total","getComponent","active","WebSocket_GameStatus_Host","scheduleOnce","connet_ws","GameStatusMessage","winner_name","prize_name_host","winner_picture","winner_score","director","loadScene","BackGround_Theme","CloseAlert","i","length","node","instantiate","parent","obj","push","updateInfo","update","dt"],"mappings":"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","sourceRoot":"/","sourcesContent":["var WinnerItem = require('Host4_WinnerRedpaket')\r\nvar gameModel = require(\"Model\");\r\n\r\n///主持人結算場景顯示中獎玩家列表js\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        items: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        round: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        WrongAlert:{\r\n            default:null,\r\n            type:cc.Node\r\n        },\r\n    },\r\n\r\n    onLoad () {\r\n        this.itemlist=[];\r\n        this.winlist=[];\r\n        this.index = [];\r\n        this.indexcount = 0;\r\n        this.items_parent = cc.find(\"畫布/中獎列表/view/內容\");\r\n        this.AlertText = cc.find(\"畫布/警告/警告文字\") \r\n    },\r\n\r\n    start () {\r\n        this.SpawnWinner();\r\n        this.round.string = gameModel.CurrentRound; \r\n    },\r\n    \r\n    //按下再來一輪鍵\r\n    NextRound(){\r\n      if(gameModel.prize_total == 0) \r\n      {\r\n        this.AlertText.getComponent(cc.Label).string = \"沒有獎品了，無法開啟下一輪\";\r\n        this.WrongAlert.active = true;\r\n      }\r\n      else {\r\n        gameModel.WebSocket_GameStatus_Host(\"open\",0.1)\r\n        this.scheduleOnce(function() { \r\n            if(gameModel.connet_ws == true)\r\n            {\r\n                gameModel.GameStatusMessage = \"open\"\r\n                gameModel.winner_name = [];\r\n                gameModel.prize_name_host = [];\r\n                gameModel.winner_picture = [];\r\n                gameModel.prize_name_host = [];\r\n                gameModel.winner_score = [];\r\n                cc.director.loadScene(\"Host1_Start\"+ gameModel.BackGround_Theme);\r\n                gameModel.connet_ws = false\r\n            }     \r\n            else\r\n            {\r\n                this.AlertText.getComponent(cc.Label).string = \"尚未與伺服器連接\";\r\n                this.WrongAlert.active = true;\r\n            }\r\n        }, 0.6);\r\n      }\r\n    },\r\n\r\n    CloseAlert(){\r\n        this.WrongAlert.active = false;\r\n    },\r\n\r\n    //列出得獎人和得到的獎品清單\r\n    SpawnWinner(){\r\n        for(var i = 0; i < gameModel.winner_name.length; i++)\r\n        {\r\n            var node = cc.instantiate(this.items);\r\n            node.parent = this.items_parent;\r\n            var obj = node.getComponent(WinnerItem);//抓取WinnerItem\r\n            this.itemlist.push(obj);\r\n            this.itemlist[i].updateInfo(i);\r\n        }\r\n    },\r\n\r\n    update (dt) {},\r\n});"]}