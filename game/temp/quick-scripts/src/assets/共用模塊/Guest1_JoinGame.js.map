{"version":3,"sources":["assets\\共用模塊\\Guest1_JoinGame.js"],"names":["gameModel","require","cc","Class","Component","properties","WrongAlert","type","Node","AlertText","Label","start","Guest1_Join_JS","TopTitle","find","getComponent","Sprite","spriteFrame","Prize_BackGround","HostWindow","string","active","JoinGame","GameStatusMessage","CannotJoinGame","WebSocket_NumberOfPeople_Guest","ConnetSuccess","director","loadScene","BackGround_Theme","ConnetFail","CloseAlert"],"mappings":";;;;;;AAAA,IAAIA,SAAS,GAAGC,OAAO,CAAC,OAAD,CAAvB,EAEA;;;AACAC,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,UAAU,EAAC;AACP,iBAAQ,IADD;AAEPC,MAAAA,IAAI,EAACL,EAAE,CAACM;AAFD,KADH;AAMRC,IAAAA,SAAS,EAAC;AACN,iBAAQ,IADF;AAENF,MAAAA,IAAI,EAACL,EAAE,CAACQ;AAFF;AANF,GAHP;AAeLC,EAAAA,KAfK,mBAeI;AACNX,IAAAA,SAAS,CAACY,cAAV,GAA2B,IAA3B;AACAZ,IAAAA,SAAS,CAACa,QAAV,GAAqBX,EAAE,CAACY,IAAH,CAAQ,UAAR,EAAoBC,YAApB,CAAiCb,EAAE,CAACc,MAApC,EAA4CC,WAAjE;AACAjB,IAAAA,SAAS,CAACkB,gBAAV,GAA6BhB,EAAE,CAACY,IAAH,CAAQ,UAAR,EAAoBC,YAApB,CAAiCb,EAAE,CAACc,MAApC,EAA4CC,WAAzE;;AACA,QAAGjB,SAAS,CAACmB,UAAV,IAAwB,OAA3B,EACA;AACC,WAAKV,SAAL,CAAeW,MAAf,GAAwB,gBAAxB;AACA,WAAKd,UAAL,CAAgBe,MAAhB,GAAyB,IAAzB;AACA;AACH,GAxBI;AA0BLC,EAAAA,QA1BK,sBA0BK;AACN,QAAItB,SAAS,CAACuB,iBAAV,IAA+B,OAA/B,IAA0CvB,SAAS,CAACwB,cAAV,IAA4B,iCAA1E,EACA;AACE,WAAKf,SAAL,CAAeW,MAAf,GAAwB,gBAAxB;AACA,WAAKd,UAAL,CAAgBe,MAAhB,GAAyB,IAAzB;AACD,KAJD,MAKKrB,SAAS,CAACyB,8BAAV,CAAyC,GAAzC,EAA6C,IAA7C;AACR,GAjCI;AAmCLC,EAAAA,aAnCK,2BAmCU;AACb,QAAG1B,SAAS,CAACwB,cAAV,IAA4B,EAA/B,EAAmCtB,EAAE,CAACyB,QAAH,CAAYC,SAAZ,CAAsB,gBAAe5B,SAAS,CAAC6B,gBAA/C,EAAnC,KAEA;AACE,WAAKpB,SAAL,CAAeW,MAAf,GAAwBpB,SAAS,CAACwB,cAAlC;AACA,WAAKlB,UAAL,CAAgBe,MAAhB,GAAyB,IAAzB;AACD;AACF,GA1CI;AA4CLS,EAAAA,UA5CK,wBA4CO;AACV,SAAKrB,SAAL,CAAeW,MAAf,GAAwB,SAAxB;AACA,SAAKd,UAAL,CAAgBe,MAAhB,GAAyB,IAAzB;AACD,GA/CI;AAiDLU,EAAAA,UAjDK,wBAiDO;AACV,SAAKzB,UAAL,CAAgBe,MAAhB,GAAyB,KAAzB;AACA,QAAGrB,SAAS,CAACwB,cAAV,IAA4B,iCAA5B,IAAiExB,SAAS,CAACmB,UAAV,IAAwB,OAA5F,EAAqGjB,EAAE,CAACyB,QAAH,CAAYC,SAAZ,CAAsB,iBAAgB5B,SAAS,CAAC6B,gBAAhD,EAArG,KACK7B,SAAS,CAACmB,UAAV,GAAuB,MAAvB;AACN;AArDI,CAAT","sourceRoot":"/","sourcesContent":["var gameModel = require(\"Model\");\r\n\r\n//玩家加入遊戲js\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        WrongAlert:{\r\n            default:null,\r\n            type:cc.Node\r\n        },\r\n        \r\n        AlertText:{\r\n            default:null,\r\n            type:cc.Label\r\n        },\r\n    },\r\n\r\n    start () {\r\n       gameModel.Guest1_Join_JS = this;\r\n       gameModel.TopTitle = cc.find(\"畫布/場景/標題\").getComponent(cc.Sprite).spriteFrame\r\n       gameModel.Prize_BackGround = cc.find(\"畫布/場景/背景\").getComponent(cc.Sprite).spriteFrame\r\n       if(gameModel.HostWindow == \"close\")\r\n       {\r\n        this.AlertText.string = \"主辦單位已關閉視窗，遊戲中止\"\r\n        this.WrongAlert.active = true\r\n       }\r\n    },\r\n    \r\n    JoinGame(){\r\n        if (gameModel.GameStatusMessage == \"close\" && gameModel.CannotJoinGame != \"錯誤: 該場次遊戲不允許重複中獎，您已中獎，無法參加下一輪遊戲\")\r\n        {\r\n          this.AlertText.string = \"請等待主辦方連接後再加入遊戲\";\r\n          this.WrongAlert.active = true\r\n        }\r\n        else gameModel.WebSocket_NumberOfPeople_Guest(500,true);\r\n    },\r\n\r\n    ConnetSuccess(){\r\n      if(gameModel.CannotJoinGame == \"\") cc.director.loadScene(\"Guest2_Wait\"+ gameModel.BackGround_Theme);\r\n      else\r\n      {\r\n        this.AlertText.string = gameModel.CannotJoinGame;\r\n        this.WrongAlert.active = true\r\n      }\r\n    },\r\n\r\n    ConnetFail(){\r\n      this.AlertText.string = \"無法連接伺服器\"\r\n      this.WrongAlert.active = true\r\n    },\r\n\r\n    CloseAlert(){\r\n      this.WrongAlert.active = false;\r\n      if(gameModel.CannotJoinGame == \"錯誤: 該場次遊戲不允許重複中獎，您已中獎，無法參加下一輪遊戲\" && gameModel.HostWindow != \"close\") cc.director.loadScene(\"Guest5_Prize\"+ gameModel.BackGround_Theme);\r\n      else gameModel.HostWindow = \"open\"\r\n    }\r\n});\r\n"]}