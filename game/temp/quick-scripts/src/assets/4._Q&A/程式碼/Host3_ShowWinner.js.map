{"version":3,"sources":["assets\\4._Q&A\\程式碼\\Host3_ShowWinner.js"],"names":["gameModel","require","WinnerItem","cc","Class","Component","properties","Rank","type","Node","onLoad","itemlist","winlist","index","indexcount","items_parent","find","start","SpawnWinner","i","winner_picture","ranked","playerAvatar","getChildByName","getComponent","Sprite","spriteFrame","Label","string","winner_name","winner_Score","winner_Taketime","assetManager","loadRemote","ext","err","texture","console","log","picture","SpriteFrame","length","node","instantiate","items","parent","obj","push","updateInfo"],"mappings":"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","sourceRoot":"/","sourcesContent":["var gameModel = require(\"Model\");\r\nvar WinnerItem = require(\"Host3_WinRecordItem\");\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        Rank:{\r\n            default: [],\r\n            type: cc.Node\r\n          },\r\n    \r\n    },\r\n\r\n\r\n    onLoad () {\r\n        this.itemlist=[];\r\n        this.winlist=[];\r\n        this.index = [];\r\n        this.indexcount = 0;\r\n        this.items_parent = cc.find(\"畫布/中獎列表/view/內容\");\r\n    },\r\n\r\n    start () {\r\n        this.SpawnWinner();\r\n    },\r\n\r\n    //列出得獎人和得到的獎品清單\r\n    SpawnWinner(){\r\n        //列出前三名得獎人\r\n        for(var i = 0; i < 3; i++)\r\n        {\r\n            if(gameModel.winner_picture[i] == null) return;\r\n            var ranked = this.Rank[i]\r\n            var playerAvatar = ranked.getChildByName(\"頭相框\").getChildByName(\"遮罩\").getChildByName(\"玩家頭像\").getComponent(cc.Sprite).spriteFrame\r\n            ranked.getChildByName(\"玩家名稱\").getComponent(cc.Label).string = gameModel.winner_name[i]\r\n            ranked.getChildByName(\"玩家分數\").getChildByName(\"分數\").getComponent(cc.Label).string = gameModel.winner_Score[i]\r\n            ranked.getChildByName(\"玩家耗時\").getChildByName(\"耗時\").getComponent(cc.Label).string = gameModel.winner_Taketime[i]\r\n           \r\n            //遠端載入: 網址轉圖片\r\n           cc.assetManager.loadRemote(gameModel.winner_picture[i],{ext :'.jpg'||'.png'},function(err,texture)\r\n           { \r\n             if(err) console.log(\"錯誤\")\r\n             else\r\n             {\r\n                 var picture = new cc.SpriteFrame(texture); //texture 轉 SpriteFrame\r\n                 playerAvatar.spriteFrame = picture;\r\n             }\r\n           });\r\n        }\r\n\r\n        //列出剩下得獎人\r\n        for(var i = 3; i < gameModel.winner_name.length; i++)\r\n        {\r\n            var node = cc.instantiate(this.items);\r\n            node.parent = this.items_parent;\r\n            var obj = node.getComponent(WinnerItem);//抓取WinnerItem\r\n            this.itemlist.push(obj);\r\n            this.itemlist[i].updateInfo(i);\r\n        }\r\n    },\r\n\r\n\r\n    // update (dt) {},\r\n});\r\n"]}