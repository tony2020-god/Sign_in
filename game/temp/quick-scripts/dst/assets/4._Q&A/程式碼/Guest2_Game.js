
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/4._Q&A/程式碼/Guest2_Game.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'dad24nwGSpLXoN5VdJLp2I3', 'Guest2_Game');
// 4._Q&A/程式碼/Guest2_Game.js

"use strict";

var gameModel = require("Model");

var Guest1_WaitingForQuestion = require("Guest1_WaitingForQuestion");

cc.Class({
  "extends": Guest1_WaitingForQuestion,
  properties: {
    Options: {
      "default": [],
      type: cc.Node
    },
    UnChooseOption: {
      "default": null,
      type: cc.SpriteFrame
    },
    WrongChoose: {
      "default": [],
      type: cc.SpriteFrame
    },
    Question: {
      "default": null,
      type: cc.Label
    }
  },
  onLoad: function onLoad() {
    this.ColorString = this.node.getComponent('ColorString');
    this.CurrentChoose = "";
    this.state = 0;
    gameModel.Answer = 3;
  },
  start: function start() {
    this.LightBlueColor = this.ColorString.colorOfString('#88FCFE'); //淺藍色

    this.DarkBlueColor = this.ColorString.colorOfString("#203E3E"); //深灰藍色

    this.GrayColor = this.ColorString.colorOfString("#515050"); //灰色

    this.WhiteColor = this.ColorString.colorOfString("#FFFFFF"); //白色 

    this.RedColor = this.ColorString.colorOfString("#FF1D1D"); //紅色 

    this.GreenColor = this.ColorString.colorOfString("#1DFF61"); //綠色 

    this.Question.string = gameModel.Question[gameModel.QuestionCount];
    this.UpdateRankScore();

    for (var i = 0; i < 4; i++) //更新選項文字
    {
      this.Options[i].getChildByName("選項文字").getComponent(cc.Label).string = gameModel.Options[i];
      this.OpacityAni(this.Options[i].getChildByName("選項文字"));
      this.OpacityAni(this.Options[i].getChildByName("選項字母"));
    }
  },
  ChooseOptions: function ChooseOptions(event, customEventData) {
    if (gameModel.GameStatusMessage == "end" || this.CurrentChoose == customEventData) return;

    for (var i = 0; i < 4; i++) //更新選項圖片
    {
      this.CurrentChoose = customEventData;
      this.Options[i].color = i == customEventData ? this.WhiteColor : this.GrayColor;

      if (i == customEventData) {
        this.OpacityAni(this.Options[i].getChildByName("外框燈"));
        this.Options[i].getChildByName("外框燈").getComponent(sp.Skeleton).setAnimation(0, "Lightflicker", false);
        var self = this.Options[i];
        this.scheduleOnce(function () {
          self.getChildByName("外框燈").getComponent(sp.Skeleton).timeScale = 1;
          self.getChildByName("外框燈").getComponent(sp.Skeleton).setAnimation(0, "lightning", true);
        }, 1);
      } else this.Options[i].getChildByName("外框燈").opacity = 0;

      this.Options[i].getChildByName("選項字母").color = this.Options[i].getChildByName("選項文字").color = i == customEventData ? this.LightBlueColor : this.DarkBlueColor;
    }
  },
  ShowAnswer: function ShowAnswer() {
    gameModel.GameStatusMessage = "end";
  },
  OpacityAni: function OpacityAni(node) {
    node.opacity = 0;
    cc.tween(node).to(0.3, {
      opacity: 255
    }).start();
  },
  update: function update(dt) {
    if (gameModel.GameStatusMessage == "end" && this.state == 0) {
      this.state = 1;

      for (var i = 0; i < 4; i++) //更新選項正確還錯誤
      {
        if (i == gameModel.Answer) {
          this.Options[i].color = this.WhiteColor;
          this.Options[i].getComponent(sp.Skeleton).setAnimation(0, "right", false);
          this.Options[i].getChildByName("選項文字").color = this.Options[i].getChildByName("選項字母").color = this.Options[i].getChildByName("外框燈").color = this.GreenColor;
          this.OpacityAni(this.Options[i].getChildByName("選項文字"));
          this.OpacityAni(this.Options[i].getChildByName("選項字母"));
        } else if (i != gameModel.Answer && this.CurrentChoose == "") {
          this.Options[i].getChildByName("選項文字").color = this.Options[i].getChildByName("選項字母").color = this.DarkBlueColor;
          this.Options[i].color = this.GrayColor;
        }
      }

      if (this.CurrentChoose != gameModel.Answer && this.CurrentChoose != "") {
        this.Options[this.CurrentChoose].getComponent(sp.Skeleton).setAnimation(0, "Wrong", false);
        this.Options[this.CurrentChoose].getChildByName("選項文字").color = this.Options[this.CurrentChoose].getChildByName("選項字母").color = this.Options[this.CurrentChoose].getChildByName("外框燈").color = this.RedColor;
      } else this.Score.string = gameModel.Score + 1;
    } else if (gameModel.GameStatusMessage == "next" && this.state == 1) cc.director.loadScene("WaitingQuestion");
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcNC5fUSZBXFznqIvlvI/norxcXEd1ZXN0Ml9HYW1lLmpzIl0sIm5hbWVzIjpbImdhbWVNb2RlbCIsInJlcXVpcmUiLCJHdWVzdDFfV2FpdGluZ0ZvclF1ZXN0aW9uIiwiY2MiLCJDbGFzcyIsInByb3BlcnRpZXMiLCJPcHRpb25zIiwidHlwZSIsIk5vZGUiLCJVbkNob29zZU9wdGlvbiIsIlNwcml0ZUZyYW1lIiwiV3JvbmdDaG9vc2UiLCJRdWVzdGlvbiIsIkxhYmVsIiwib25Mb2FkIiwiQ29sb3JTdHJpbmciLCJub2RlIiwiZ2V0Q29tcG9uZW50IiwiQ3VycmVudENob29zZSIsInN0YXRlIiwiQW5zd2VyIiwic3RhcnQiLCJMaWdodEJsdWVDb2xvciIsImNvbG9yT2ZTdHJpbmciLCJEYXJrQmx1ZUNvbG9yIiwiR3JheUNvbG9yIiwiV2hpdGVDb2xvciIsIlJlZENvbG9yIiwiR3JlZW5Db2xvciIsInN0cmluZyIsIlF1ZXN0aW9uQ291bnQiLCJVcGRhdGVSYW5rU2NvcmUiLCJpIiwiZ2V0Q2hpbGRCeU5hbWUiLCJPcGFjaXR5QW5pIiwiQ2hvb3NlT3B0aW9ucyIsImV2ZW50IiwiY3VzdG9tRXZlbnREYXRhIiwiR2FtZVN0YXR1c01lc3NhZ2UiLCJjb2xvciIsInNwIiwiU2tlbGV0b24iLCJzZXRBbmltYXRpb24iLCJzZWxmIiwic2NoZWR1bGVPbmNlIiwidGltZVNjYWxlIiwib3BhY2l0eSIsIlNob3dBbnN3ZXIiLCJ0d2VlbiIsInRvIiwidXBkYXRlIiwiZHQiLCJTY29yZSIsImRpcmVjdG9yIiwibG9hZFNjZW5lIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLFNBQVMsR0FBR0MsT0FBTyxDQUFDLE9BQUQsQ0FBdkI7O0FBQ0EsSUFBSUMseUJBQXlCLEdBQUdELE9BQU8sQ0FBQywyQkFBRCxDQUF2Qzs7QUFFQUUsRUFBRSxDQUFDQyxLQUFILENBQVM7QUFDTCxhQUFTRix5QkFESjtBQUdMRyxFQUFBQSxVQUFV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RCxNQUFoRCxFQUF3RE0sS0FBeEQsR0FBZ0UsS0FBS2pDLE9BQUwsQ0FBYSxLQUFLWSxhQUFsQixFQUFpQ2UsY0FBakMsQ0FBZ0QsS0FBaEQsRUFBdURNLEtBQXZELEdBQThELEtBQUtaLFFBQW5NO0FBQ0gsT0FKRCxNQUtLLEtBQUt5QixLQUFMLENBQVd2QixNQUFYLEdBQW9CN0IsU0FBUyxDQUFDb0QsS0FBVixHQUFrQixDQUF0QztBQUNSLEtBMUJELE1BMkJLLElBQUdwRCxTQUFTLENBQUNzQyxpQkFBVixJQUErQixNQUEvQixJQUF5QyxLQUFLbkIsS0FBTCxJQUFjLENBQTFELEVBQTZEaEIsRUFBRSxDQUFDa0QsUUFBSCxDQUFZQyxTQUFaLENBQXNCLGlCQUF0QjtBQUNyRTtBQWpISSxDQUFUIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZ2FtZU1vZGVsID0gcmVxdWlyZShcIk1vZGVsXCIpO1xyXG52YXIgR3Vlc3QxX1dhaXRpbmdGb3JRdWVzdGlvbiA9IHJlcXVpcmUoXCJHdWVzdDFfV2FpdGluZ0ZvclF1ZXN0aW9uXCIpO1xyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogR3Vlc3QxX1dhaXRpbmdGb3JRdWVzdGlvbixcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgT3B0aW9ucyA6e1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBbXSxcclxuICAgICAgICAgICAgdHlwZTogY2MuTm9kZVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIFVuQ2hvb3NlT3B0aW9uIDp7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLlNwcml0ZUZyYW1lXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgV3JvbmdDaG9vc2UgOntcclxuICAgICAgICAgICAgZGVmYXVsdDogW10sXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLlNwcml0ZUZyYW1lXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgUXVlc3Rpb24gOntcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuTGFiZWxcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuXHJcblxyXG4gICAgb25Mb2FkICgpIHtcclxuICAgICAgICB0aGlzLkNvbG9yU3RyaW5nID0gdGhpcy5ub2RlLmdldENvbXBvbmVudCgnQ29sb3JTdHJpbmcnKVxyXG4gICAgICAgIHRoaXMuQ3VycmVudENob29zZSA9IFwiXCJcclxuICAgICAgICB0aGlzLnN0YXRlID0gMFxyXG4gICAgICAgIGdhbWVNb2RlbC5BbnN3ZXIgPSAzXHJcbiAgICB9LFxyXG5cclxuICAgIHN0YXJ0ICgpIHtcclxuICAgICAgIHRoaXMuTGlnaHRCbHVlQ29sb3IgPSB0aGlzLkNvbG9yU3RyaW5nLmNvbG9yT2ZTdHJpbmcoJyM4OEZDRkUnKSAvL+a3uuiXjeiJslxyXG4gICAgICAgdGhpcy5EYXJrQmx1ZUNvbG9yID0gdGhpcy5Db2xvclN0cmluZy5jb2xvck9mU3RyaW5nKFwiIzIwM0UzRVwiKSAvL+a3seeBsOiXjeiJslxyXG4gICAgICAgdGhpcy5HcmF5Q29sb3IgPSB0aGlzLkNvbG9yU3RyaW5nLmNvbG9yT2ZTdHJpbmcoXCIjNTE1MDUwXCIpIC8v54Gw6ImyXHJcbiAgICAgICB0aGlzLldoaXRlQ29sb3IgPSB0aGlzLkNvbG9yU3RyaW5nLmNvbG9yT2ZTdHJpbmcoXCIjRkZGRkZGXCIpIC8v55m96ImyIFxyXG4gICAgICAgdGhpcy5SZWRDb2xvciA9IHRoaXMuQ29sb3JTdHJpbmcuY29sb3JPZlN0cmluZyhcIiNGRjFEMURcIikgLy/ntIXoibIgXHJcbiAgICAgICB0aGlzLkdyZWVuQ29sb3IgPSB0aGlzLkNvbG9yU3RyaW5nLmNvbG9yT2ZTdHJpbmcoXCIjMURGRjYxXCIpIC8v57ag6ImyIFxyXG4gICAgICAgdGhpcy5RdWVzdGlvbi5zdHJpbmcgPSBnYW1lTW9kZWwuUXVlc3Rpb25bZ2FtZU1vZGVsLlF1ZXN0aW9uQ291bnRdXHJcbiAgICAgICB0aGlzLlVwZGF0ZVJhbmtTY29yZSgpO1xyXG4gICAgICAgZm9yKHZhciBpID0gMDsgaSA8IDQ7IGkrKykgLy/mm7TmlrDpgbjpoIXmloflrZdcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuT3B0aW9uc1tpXS5nZXRDaGlsZEJ5TmFtZShcIumBuOmgheaWh+Wtl1wiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IGdhbWVNb2RlbC5PcHRpb25zW2ldO1xyXG4gICAgICAgICAgICB0aGlzLk9wYWNpdHlBbmkodGhpcy5PcHRpb25zW2ldLmdldENoaWxkQnlOYW1lKFwi6YG46aCF5paH5a2XXCIpKVxyXG4gICAgICAgICAgICB0aGlzLk9wYWNpdHlBbmkodGhpcy5PcHRpb25zW2ldLmdldENoaWxkQnlOYW1lKFwi6YG46aCF5a2X5q+NXCIpKVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG5cclxuICAgIENob29zZU9wdGlvbnMoZXZlbnQsIGN1c3RvbUV2ZW50RGF0YSl7XHJcbiAgICAgICAgaWYoZ2FtZU1vZGVsLkdhbWVTdGF0dXNNZXNzYWdlID09IFwiZW5kXCIgfHwgdGhpcy5DdXJyZW50Q2hvb3NlID09IGN1c3RvbUV2ZW50RGF0YSkgcmV0dXJuO1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCA0OyBpKyspIC8v5pu05paw6YG46aCF5ZyW54mHXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLkN1cnJlbnRDaG9vc2UgPSBjdXN0b21FdmVudERhdGFcclxuICAgICAgICAgICAgdGhpcy5PcHRpb25zW2ldLmNvbG9yID0gaSA9PSBjdXN0b21FdmVudERhdGEgPyB0aGlzLldoaXRlQ29sb3IgOiB0aGlzLkdyYXlDb2xvcjtcclxuICAgICAgICAgICAgaWYoaSA9PSBjdXN0b21FdmVudERhdGEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuT3BhY2l0eUFuaSh0aGlzLk9wdGlvbnNbaV0uZ2V0Q2hpbGRCeU5hbWUoXCLlpJbmoYbnh4hcIikpXHJcbiAgICAgICAgICAgICAgICB0aGlzLk9wdGlvbnNbaV0uZ2V0Q2hpbGRCeU5hbWUoXCLlpJbmoYbnh4hcIikuZ2V0Q29tcG9uZW50KHNwLlNrZWxldG9uKS5zZXRBbmltYXRpb24oMCxcIkxpZ2h0ZmxpY2tlclwiLGZhbHNlKTsgXHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXMuT3B0aW9uc1tpXVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2hlZHVsZU9uY2UoZnVuY3Rpb24oKSB7IFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZ2V0Q2hpbGRCeU5hbWUoXCLlpJbmoYbnh4hcIikuZ2V0Q29tcG9uZW50KHNwLlNrZWxldG9uKS50aW1lU2NhbGUgPSAxXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5nZXRDaGlsZEJ5TmFtZShcIuWkluahhueHiFwiKS5nZXRDb21wb25lbnQoc3AuU2tlbGV0b24pLnNldEFuaW1hdGlvbigwLFwibGlnaHRuaW5nXCIsdHJ1ZSk7IFxyXG4gICAgICAgICAgICAgICAgfSwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB0aGlzLk9wdGlvbnNbaV0uZ2V0Q2hpbGRCeU5hbWUoXCLlpJbmoYbnh4hcIikub3BhY2l0eSA9IDBcclxuICAgICAgICAgICAgdGhpcy5PcHRpb25zW2ldLmdldENoaWxkQnlOYW1lKFwi6YG46aCF5a2X5q+NXCIpLmNvbG9yID0gdGhpcy5PcHRpb25zW2ldLmdldENoaWxkQnlOYW1lKFwi6YG46aCF5paH5a2XXCIpLmNvbG9yID0gaSA9PSBjdXN0b21FdmVudERhdGEgPyB0aGlzLkxpZ2h0Qmx1ZUNvbG9yIDogdGhpcy5EYXJrQmx1ZUNvbG9yXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBTaG93QW5zd2VyKCl7XHJcbiAgICAgICAgZ2FtZU1vZGVsLkdhbWVTdGF0dXNNZXNzYWdlID0gXCJlbmRcIlxyXG4gICAgfSxcclxuXHJcbiAgICAgICAgXHJcbiAgICBPcGFjaXR5QW5pKG5vZGUpe1xyXG4gICAgICAgIG5vZGUub3BhY2l0eSA9IDBcclxuICAgICAgICBjYy50d2Vlbihub2RlKVxyXG4gICAgICAgIC50bygwLjMsIHtvcGFjaXR5OiAyNTV9KVxyXG4gICAgICAgIC5zdGFydCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICB1cGRhdGUgKGR0KSB7XHJcbiAgICAgICAgaWYoZ2FtZU1vZGVsLkdhbWVTdGF0dXNNZXNzYWdlID09IFwiZW5kXCIgJiYgdGhpcy5zdGF0ZSA9PSAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IDFcclxuICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IDQ7IGkrKykgLy/mm7TmlrDpgbjpoIXmraPnorrpgoTpjK/oqqRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGlmKGkgPT0gZ2FtZU1vZGVsLkFuc3dlcikgXHJcbiAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5PcHRpb25zW2ldLmNvbG9yID0gdGhpcy5XaGl0ZUNvbG9yXHJcbiAgICAgICAgICAgICAgICB0aGlzLk9wdGlvbnNbaV0uZ2V0Q29tcG9uZW50KHNwLlNrZWxldG9uKS5zZXRBbmltYXRpb24oMCxcInJpZ2h0XCIsZmFsc2UpOyBcclxuICAgICAgICAgICAgICAgIHRoaXMuT3B0aW9uc1tpXS5nZXRDaGlsZEJ5TmFtZShcIumBuOmgheaWh+Wtl1wiKS5jb2xvciA9IHRoaXMuT3B0aW9uc1tpXS5nZXRDaGlsZEJ5TmFtZShcIumBuOmgheWtl+avjVwiKS5jb2xvciA9IHRoaXMuT3B0aW9uc1tpXS5nZXRDaGlsZEJ5TmFtZShcIuWkluahhueHiFwiKS5jb2xvciA9IHRoaXMuR3JlZW5Db2xvclxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuT3BhY2l0eUFuaSh0aGlzLk9wdGlvbnNbaV0uZ2V0Q2hpbGRCeU5hbWUoXCLpgbjpoIXmloflrZdcIikpXHJcbiAgICAgICAgICAgICAgICB0aGlzLk9wYWNpdHlBbmkodGhpcy5PcHRpb25zW2ldLmdldENoaWxkQnlOYW1lKFwi6YG46aCF5a2X5q+NXCIpKVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBlbHNlIGlmKChpICE9IGdhbWVNb2RlbC5BbnN3ZXIpICYmIHRoaXMuQ3VycmVudENob29zZSA9PSBcIlwiKVxyXG4gICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuT3B0aW9uc1tpXS5nZXRDaGlsZEJ5TmFtZShcIumBuOmgheaWh+Wtl1wiKS5jb2xvciA9IHRoaXMuT3B0aW9uc1tpXS5nZXRDaGlsZEJ5TmFtZShcIumBuOmgheWtl+avjVwiKS5jb2xvciA9IHRoaXMuRGFya0JsdWVDb2xvclxyXG4gICAgICAgICAgICAgICAgdGhpcy5PcHRpb25zW2ldLmNvbG9yID0gdGhpcy5HcmF5Q29sb3JcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYodGhpcy5DdXJyZW50Q2hvb3NlICE9IGdhbWVNb2RlbC5BbnN3ZXIgJiYgdGhpcy5DdXJyZW50Q2hvb3NlICE9IFwiXCIpIFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLk9wdGlvbnNbdGhpcy5DdXJyZW50Q2hvb3NlXS5nZXRDb21wb25lbnQoc3AuU2tlbGV0b24pLnNldEFuaW1hdGlvbigwLFwiV3JvbmdcIixmYWxzZSk7IFxyXG4gICAgICAgICAgICAgICAgdGhpcy5PcHRpb25zW3RoaXMuQ3VycmVudENob29zZV0uZ2V0Q2hpbGRCeU5hbWUoXCLpgbjpoIXmloflrZdcIikuY29sb3IgPSB0aGlzLk9wdGlvbnNbdGhpcy5DdXJyZW50Q2hvb3NlXS5nZXRDaGlsZEJ5TmFtZShcIumBuOmgheWtl+avjVwiKS5jb2xvciA9IHRoaXMuT3B0aW9uc1t0aGlzLkN1cnJlbnRDaG9vc2VdLmdldENoaWxkQnlOYW1lKFwi5aSW5qGG54eIXCIpLmNvbG9yID10aGlzLlJlZENvbG9yXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB0aGlzLlNjb3JlLnN0cmluZyA9IGdhbWVNb2RlbC5TY29yZSArIDE7XHJcbiAgICAgICAgfSBcclxuICAgICAgICBlbHNlIGlmKGdhbWVNb2RlbC5HYW1lU3RhdHVzTWVzc2FnZSA9PSBcIm5leHRcIiAmJiB0aGlzLnN0YXRlID09IDEpIGNjLmRpcmVjdG9yLmxvYWRTY2VuZShcIldhaXRpbmdRdWVzdGlvblwiKVxyXG4gICAgfSxcclxuXHJcbn0pO1xyXG4iXX0=