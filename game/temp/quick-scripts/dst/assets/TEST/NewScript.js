
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/TEST/NewScript.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '6d0efRnsChM6Jd1eAmnyvDU', 'NewScript');
// TEST/NewScript.js

"use strict";

var gameModel = require("Model");

cc.Class({
  "extends": cc.Component,
  properties: {
    Ingame: {
      "default": null,
      type: cc.Node
    },
    Fake: {
      "default": null,
      type: cc.SpriteFrame
    },
    Real: {
      "default": null,
      type: cc.SpriteFrame
    },
    Score: {
      "default": null,
      type: cc.Label
    },
    items: {
      "default": null,
      type: cc.Prefab
    }
  },
  // LIFE-CYCLE CALLBACKS:
  onLoad: function onLoad() {
    this.pos = this.Ingame.position;
    gameModel.TopTitle = "無";
    cc.director.getCollisionManager().enabled = true;
    this.randomNodeIndex = 1;
    this.items_parent = cc.find("畫布");
    gameModel.score = 0;
  },
  start: function start() {
    this.node.on('touchmove', this.move, this);
    this.node.on('touchend', this.end, this);
    this.node.on('touchcancel', this.end, this);
    this.pos = this.Ingame.position;
    console.log(this.pos);
  },
  move: function move(event) {
    var pos = new cc.Vec2(event.getLocationX(), event.getLocationY());
    pos = this.node.convertToNodeSpaceAR(pos);
    this.Ingame.position = pos;
  },
  end: function end() {
    if (gameModel.TopTitle == "加分") {
      gameModel.score = this.randomNodeIndex > 0 ? gameModel.score + 1 : gameModel.score - 3;
      if (gameModel.score < 0) gameModel.score = 0;
      this.Score.string = "分數: " + gameModel.score;
      this.ADDanii(this.Ingame);
      this.reset();
      console.log("加分");
    } else if (gameModel.TopTitle == "扣分") {
      this.Mani(this.Ingame);
      this.reset();
      console.log("扣分");
    } else if (gameModel.TopTitle == "無") this.Ingame.position = this.pos;
  },
  reset: function reset() {
    gameModel.TopTitle = "無";
    this.randomNodeIndex = Math.floor(Math.random() * 5);
    console.log(this.randomNodeIndex);
    var node = cc.instantiate(this.items);
    node.getComponent(cc.Sprite).spriteFrame = this.randomNodeIndex == 0 ? this.Fake : this.Real;
    node.parent = this.items_parent;
    this.Ingame = node;
    this.Ingame.position = this.pos;
  },
  ADDanii: function ADDanii(node) {
    cc.tween(node).to(0.5, {
      position: cc.v2(0, 667.876),
      scale: 0
    }).call(function () {
      node.destroy();
    }).start();
  },
  Mani: function Mani(node) {
    cc.tween(node).to(0.1, {
      position: cc.v2(0, -1771.968)
    }).call(function () {
      node.destroy();
    }).start();
  } // update (dt) {},

});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcVEVTVFxcTmV3U2NyaXB0LmpzIl0sIm5hbWVzIjpbImdhbWVNb2RlbCIsInJlcXVpcmUiLCJjYyIsIkNsYXNzIiwiQ29tcG9uZW50IiwicHJvcGVydGllcyIsIkluZ2FtZSIsInR5cGUiLCJOb2RlIiwiRmFrZSIsIlNwcml0ZUZyYW1lIiwiUmVhbCIsIlNjb3JlIiwiTGFiZWwiLCJpdGVtcyIsIlByZWZhYiIsIm9uTG9hZCIsInBvcyIsInBvc2l0aW9uIiwiVG9wVGl0bGUiLCJkaXJlY3RvciIsImdldENvbGxpc2lvbk1hbmFnZXIiLCJlbmFibGVkIiwicmFuZG9tTm9kZUluZGV4IiwiaXRlbXNfcGFyZW50IiwiZmluZCIsInNjb3JlIiwic3RhcnQiLCJub2RlIiwib24iLCJtb3ZlIiwiZW5kIiwiY29uc29sZSIsImxvZyIsImV2ZW50IiwiVmVjMiIsImdldExvY2F0aW9uWCIsImdldExvY2F0aW9uWSIsImNvbnZlcnRUb05vZGVTcGFjZUFSIiwic3RyaW5nIiwiQUREYW5paSIsInJlc2V0IiwiTWFuaSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImluc3RhbnRpYXRlIiwiZ2V0Q29tcG9uZW50IiwiU3ByaXRlIiwic3ByaXRlRnJhbWUiLCJwYXJlbnQiLCJ0d2VlbiIsInRvIiwidjIiLCJzY2FsZSIsImNhbGwiLCJkZXN0cm95Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLFNBQVMsR0FBR0MsT0FBTyxDQUFDLE9BQUQsQ0FBdkI7O0FBRUFDLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTO0FBQ0wsYUFBU0QsRUFBRSxDQUFDRSxTQURQO0FBR0xDLEVBQUFBLFVBQVUsRUFBRTtBQUNSQyxJQUFBQSxNQUFNLEVBQUU7QUFDSixpQkFBUyxJQURMO0FBRUpDLE1BQUFBLElBQUksRUFBRUwsRUFBRSxDQUFDTTtBQUZMLEtBREE7QUFNUkMsSUFBQUEsSUFBSSxFQUFDO0FBQ0QsaUJBQVMsSUFEUjtBQUVERixNQUFBQSxJQUFJLEVBQUVMLEVBQUUsQ0FBQ1E7QUFGUixLQU5HO0FBV1JDLElBQUFBLElBQUksRUFBQztBQUNELGlCQUFTLElBRFI7QUFFREosTUFBQUEsSUFBSSxFQUFFTCxFQUFFLENBQUNRO0FBRlIsS0FYRztBQWdCUkUsSUFBQUEsS0FBSyxFQUFDO0FBQ0YsaUJBQVMsSUFEUDtBQUVGTCxNQUFBQSxJQUFJLEVBQUVMLEVBQUUsQ0FBQ1c7QUFGUCxLQWhCRTtBQXFCUkMsSUFBQUEsS0FBSyxFQUFFO0FBQ0gsaUJBQVMsSUFETjtBQUVIUCxNQUFBQSxJQUFJLEVBQUVMLEVBQUUsQ0FBQ2E7QUFGTjtBQXJCQyxHQUhQO0FBOEJMO0FBRUFDLEVBQUFBLE1BaENLLG9CQWdDSztBQUNOLFNBQUtDLEdBQUwsR0FBVyxLQUFLWCxNQUFMLENBQVlZLFFBQXZCO0FBQ0FsQixJQUFBQSxTQUFTLENBQUNtQixRQUFWLEdBQXFCLEdBQXJCO0FBQ0FqQixJQUFBQSxFQUFFLENBQUNrQixRQUFILENBQVlDLG1CQUFaLEdBQWtDQyxPQUFsQyxHQUE0QyxJQUE1QztBQUNBLFNBQUtDLGVBQUwsR0FBdUIsQ0FBdkI7QUFDQSxTQUFLQyxZQUFMLEdBQW9CdEIsRUFBRSxDQUFDdUIsSUFBSCxDQUFRLElBQVIsQ0FBcEI7QUFDQXpCLElBQUFBLFNBQVMsQ0FBQzBCLEtBQVYsR0FBa0IsQ0FBbEI7QUFDSCxHQXZDSTtBQXlDTEMsRUFBQUEsS0F6Q0ssbUJBeUNJO0FBQ0wsU0FBS0MsSUFBTCxDQUFVQyxFQUFWLENBQWEsV0FBYixFQUEwQixLQUFLQyxJQUEvQixFQUFxQyxJQUFyQztBQUNBLFNBQUtGLElBQUwsQ0FBVUMsRUFBVixDQUFhLFVBQWIsRUFBeUIsS0FBS0UsR0FBOUIsRUFBbUMsSUFBbkM7QUFDQSxTQUFLSCxJQUFMLENBQVVDLEVBQVYsQ0FBYSxhQUFiLEVBQTJCLEtBQUtFLEdBQWhDLEVBQXFDLElBQXJDO0FBQ0EsU0FBS2QsR0FBTCxHQUFXLEtBQUtYLE1BQUwsQ0FBWVksUUFBdkI7QUFDQWMsSUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksS0FBS2hCLEdBQWpCO0FBQ0gsR0EvQ0k7QUFpRExhLEVBQUFBLElBakRLLGdCQWlEQUksS0FqREEsRUFpRE07QUFDUixRQUFJakIsR0FBRyxHQUFHLElBQUlmLEVBQUUsQ0FBQ2lDLElBQVAsQ0FBWUQsS0FBSyxDQUFDRSxZQUFOLEVBQVosRUFBaUNGLEtBQUssQ0FBQ0csWUFBTixFQUFqQyxDQUFWO0FBQ0FwQixJQUFBQSxHQUFHLEdBQUcsS0FBS1csSUFBTCxDQUFVVSxvQkFBVixDQUErQnJCLEdBQS9CLENBQU47QUFDQSxTQUFLWCxNQUFMLENBQVlZLFFBQVosR0FBdUJELEdBQXZCO0FBQ0YsR0FyREk7QUF1RExjLEVBQUFBLEdBdkRLLGlCQXVEQTtBQUNBLFFBQUcvQixTQUFTLENBQUNtQixRQUFWLElBQXNCLElBQXpCLEVBQ0E7QUFDR25CLE1BQUFBLFNBQVMsQ0FBQzBCLEtBQVYsR0FBa0IsS0FBS0gsZUFBTCxHQUF1QixDQUF2QixHQUEyQnZCLFNBQVMsQ0FBQzBCLEtBQVYsR0FBa0IsQ0FBN0MsR0FBaUQxQixTQUFTLENBQUMwQixLQUFWLEdBQWtCLENBQXJGO0FBQ0EsVUFBRzFCLFNBQVMsQ0FBQzBCLEtBQVYsR0FBa0IsQ0FBckIsRUFBd0IxQixTQUFTLENBQUMwQixLQUFWLEdBQWtCLENBQWxCO0FBQ3hCLFdBQUtkLEtBQUwsQ0FBVzJCLE1BQVgsR0FBb0IsU0FBU3ZDLFNBQVMsQ0FBQzBCLEtBQXZDO0FBQ0EsV0FBS2MsT0FBTCxDQUFhLEtBQUtsQyxNQUFsQjtBQUNBLFdBQUttQyxLQUFMO0FBQ0FULE1BQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLElBQVo7QUFDRixLQVJELE1BU0ssSUFBR2pDLFNBQVMsQ0FBQ21CLFFBQVYsSUFBc0IsSUFBekIsRUFDTDtBQUNHLFdBQUt1QixJQUFMLENBQVUsS0FBS3BDLE1BQWY7QUFDQSxXQUFLbUMsS0FBTDtBQUNBVCxNQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxJQUFaO0FBQ0YsS0FMSSxNQU1BLElBQUdqQyxTQUFTLENBQUNtQixRQUFWLElBQXNCLEdBQXpCLEVBQThCLEtBQUtiLE1BQUwsQ0FBWVksUUFBWixHQUF1QixLQUFLRCxHQUE1QjtBQUN2QyxHQXhFSTtBQTBFTHdCLEVBQUFBLEtBMUVLLG1CQTBFRTtBQUNIekMsSUFBQUEsU0FBUyxDQUFDbUIsUUFBVixHQUFxQixHQUFyQjtBQUNBLFNBQUtJLGVBQUwsR0FBdUJvQixJQUFJLENBQUNDLEtBQUwsQ0FBV0QsSUFBSSxDQUFDRSxNQUFMLEtBQWdCLENBQTNCLENBQXZCO0FBQ0FiLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLEtBQUtWLGVBQWpCO0FBQ0EsUUFBSUssSUFBSSxHQUFHMUIsRUFBRSxDQUFDNEMsV0FBSCxDQUFlLEtBQUtoQyxLQUFwQixDQUFYO0FBQ0FjLElBQUFBLElBQUksQ0FBQ21CLFlBQUwsQ0FBa0I3QyxFQUFFLENBQUM4QyxNQUFyQixFQUE2QkMsV0FBN0IsR0FBMkMsS0FBSzFCLGVBQUwsSUFBd0IsQ0FBeEIsR0FBNEIsS0FBS2QsSUFBakMsR0FBd0MsS0FBS0UsSUFBeEY7QUFDQWlCLElBQUFBLElBQUksQ0FBQ3NCLE1BQUwsR0FBYyxLQUFLMUIsWUFBbkI7QUFDQSxTQUFLbEIsTUFBTCxHQUFjc0IsSUFBZDtBQUNBLFNBQUt0QixNQUFMLENBQVlZLFFBQVosR0FBdUIsS0FBS0QsR0FBNUI7QUFDSCxHQW5GSTtBQXFGTHVCLEVBQUFBLE9BckZLLG1CQXFGR1osSUFyRkgsRUFxRlE7QUFDVDFCLElBQUFBLEVBQUUsQ0FBQ2lELEtBQUgsQ0FBU3ZCLElBQVQsRUFDQ3dCLEVBREQsQ0FDSSxHQURKLEVBQ1E7QUFBRWxDLE1BQUFBLFFBQVEsRUFBRWhCLEVBQUUsQ0FBQ21ELEVBQUgsQ0FBTSxDQUFOLEVBQVMsT0FBVCxDQUFaO0FBQThCQyxNQUFBQSxLQUFLLEVBQUU7QUFBckMsS0FEUixFQUVDQyxJQUZELENBRU0sWUFBTTtBQUFDM0IsTUFBQUEsSUFBSSxDQUFDNEIsT0FBTDtBQUFnQixLQUY3QixFQUdDN0IsS0FIRDtBQUlILEdBMUZJO0FBNEZMZSxFQUFBQSxJQTVGSyxnQkE0RkFkLElBNUZBLEVBNEZLO0FBQ04xQixJQUFBQSxFQUFFLENBQUNpRCxLQUFILENBQVN2QixJQUFULEVBQ0N3QixFQURELENBQ0ksR0FESixFQUNRO0FBQUVsQyxNQUFBQSxRQUFRLEVBQUVoQixFQUFFLENBQUNtRCxFQUFILENBQU0sQ0FBTixFQUFTLENBQUMsUUFBVjtBQUFaLEtBRFIsRUFFQ0UsSUFGRCxDQUVNLFlBQU07QUFBQzNCLE1BQUFBLElBQUksQ0FBQzRCLE9BQUw7QUFBZ0IsS0FGN0IsRUFHQzdCLEtBSEQ7QUFJSCxHQWpHSSxDQWtHTDs7QUFsR0ssQ0FBVCIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGdhbWVNb2RlbCA9IHJlcXVpcmUoXCJNb2RlbFwiKTtcclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgSW5nYW1lOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLk5vZGVcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBGYWtlOntcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuU3ByaXRlRnJhbWVcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBSZWFsOntcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuU3ByaXRlRnJhbWVcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBTY29yZTp7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLkxhYmVsXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgaXRlbXM6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuUHJlZmFiXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gTElGRS1DWUNMRSBDQUxMQkFDS1M6XHJcblxyXG4gICAgb25Mb2FkICgpIHtcclxuICAgICAgICB0aGlzLnBvcyA9IHRoaXMuSW5nYW1lLnBvc2l0aW9uXHJcbiAgICAgICAgZ2FtZU1vZGVsLlRvcFRpdGxlID0gXCLnhKFcIlxyXG4gICAgICAgIGNjLmRpcmVjdG9yLmdldENvbGxpc2lvbk1hbmFnZXIoKS5lbmFibGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnJhbmRvbU5vZGVJbmRleCA9IDFcclxuICAgICAgICB0aGlzLml0ZW1zX3BhcmVudCA9IGNjLmZpbmQoXCLnlavluINcIilcclxuICAgICAgICBnYW1lTW9kZWwuc2NvcmUgPSAwXHJcbiAgICB9LFxyXG5cclxuICAgIHN0YXJ0ICgpIHtcclxuICAgICAgICB0aGlzLm5vZGUub24oJ3RvdWNobW92ZScsIHRoaXMubW92ZSwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5ub2RlLm9uKCd0b3VjaGVuZCcsIHRoaXMuZW5kLCB0aGlzKTtcclxuICAgICAgICB0aGlzLm5vZGUub24oJ3RvdWNoY2FuY2VsJyx0aGlzLmVuZCwgdGhpcylcclxuICAgICAgICB0aGlzLnBvcyA9IHRoaXMuSW5nYW1lLnBvc2l0aW9uXHJcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5wb3MpXHJcbiAgICB9LFxyXG5cclxuICAgIG1vdmUoZXZlbnQpe1xyXG4gICAgICAgdmFyIHBvcyA9IG5ldyBjYy5WZWMyKGV2ZW50LmdldExvY2F0aW9uWCgpLGV2ZW50LmdldExvY2F0aW9uWSgpKSBcclxuICAgICAgIHBvcyA9IHRoaXMubm9kZS5jb252ZXJ0VG9Ob2RlU3BhY2VBUihwb3MpXHJcbiAgICAgICB0aGlzLkluZ2FtZS5wb3NpdGlvbiA9IHBvc1xyXG4gICAgfSxcclxuXHJcbiAgICBlbmQoKXtcclxuICAgICAgICAgaWYoZ2FtZU1vZGVsLlRvcFRpdGxlID09IFwi5Yqg5YiGXCIpIFxyXG4gICAgICAgICB7XHJcbiAgICAgICAgICAgIGdhbWVNb2RlbC5zY29yZSA9IHRoaXMucmFuZG9tTm9kZUluZGV4ID4gMCA/IGdhbWVNb2RlbC5zY29yZSArIDEgOiBnYW1lTW9kZWwuc2NvcmUgLSAzXHJcbiAgICAgICAgICAgIGlmKGdhbWVNb2RlbC5zY29yZSA8IDApIGdhbWVNb2RlbC5zY29yZSA9IDBcclxuICAgICAgICAgICAgdGhpcy5TY29yZS5zdHJpbmcgPSBcIuWIhuaVuDogXCIgKyBnYW1lTW9kZWwuc2NvcmVcclxuICAgICAgICAgICAgdGhpcy5BRERhbmlpKHRoaXMuSW5nYW1lKVxyXG4gICAgICAgICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5Yqg5YiGXCIpXHJcbiAgICAgICAgIH1cclxuICAgICAgICAgZWxzZSBpZihnYW1lTW9kZWwuVG9wVGl0bGUgPT0gXCLmiaPliIZcIikgXHJcbiAgICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5NYW5pKHRoaXMuSW5nYW1lKTtcclxuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIuaJo+WIhlwiKVxyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGVsc2UgaWYoZ2FtZU1vZGVsLlRvcFRpdGxlID09IFwi54ShXCIpIHRoaXMuSW5nYW1lLnBvc2l0aW9uID0gdGhpcy5wb3NcclxuICAgIH0sXHJcblxyXG4gICAgcmVzZXQoKXtcclxuICAgICAgICBnYW1lTW9kZWwuVG9wVGl0bGUgPSBcIueEoVwiXHJcbiAgICAgICAgdGhpcy5yYW5kb21Ob2RlSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA1KVxyXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMucmFuZG9tTm9kZUluZGV4KVxyXG4gICAgICAgIHZhciBub2RlID0gY2MuaW5zdGFudGlhdGUodGhpcy5pdGVtcyk7XHJcbiAgICAgICAgbm9kZS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IHRoaXMucmFuZG9tTm9kZUluZGV4ID09IDAgPyB0aGlzLkZha2UgOiB0aGlzLlJlYWxcclxuICAgICAgICBub2RlLnBhcmVudCA9IHRoaXMuaXRlbXNfcGFyZW50O1xyXG4gICAgICAgIHRoaXMuSW5nYW1lID0gbm9kZVxyXG4gICAgICAgIHRoaXMuSW5nYW1lLnBvc2l0aW9uID0gdGhpcy5wb3NcclxuICAgIH0sXHJcblxyXG4gICAgQUREYW5paShub2RlKXtcclxuICAgICAgICBjYy50d2Vlbihub2RlKVxyXG4gICAgICAgIC50bygwLjUseyBwb3NpdGlvbjogY2MudjIoMCwgNjY3Ljg3Niksc2NhbGU6IDB9KVxyXG4gICAgICAgIC5jYWxsKCgpID0+IHtub2RlLmRlc3Ryb3koKTt9KVxyXG4gICAgICAgIC5zdGFydCgpXHJcbiAgICB9LFxyXG5cclxuICAgIE1hbmkobm9kZSl7XHJcbiAgICAgICAgY2MudHdlZW4obm9kZSlcclxuICAgICAgICAudG8oMC4xLHsgcG9zaXRpb246IGNjLnYyKDAsIC0xNzcxLjk2OCl9KVxyXG4gICAgICAgIC5jYWxsKCgpID0+IHtub2RlLmRlc3Ryb3koKTt9KVxyXG4gICAgICAgIC5zdGFydCgpXHJcbiAgICB9LFxyXG4gICAgLy8gdXBkYXRlIChkdCkge30sXHJcbn0pO1xyXG4iXX0=